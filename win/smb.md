# SMB(Server Message Block)

SMBはWindowsを中心に使われるファイル共有・プリンタ共有の通信プロトコル。

=> 他のコンピューターにあるファイルやプリンタを、あたかも自分のPCのように使うための仕組み

どんなときに使われている？

- Windowsのネットワークドライブの割り当て
- NAS(ネットワークHDD)にアクセス
- 他のPCの共有フォルダを開くとき
- Windowsプリンタ共有

=> つまり、`\\サーバー名(もしくはIP)\共有フォルダ名`とかでアクセスするやつ

## SMBのポート番号とバージョン

| バージョン    | ポート番号  | 特徴                                     |
|---------------|-------------|------------------------------------------|
| SMB 1.0       | TCP 139     | 古い。セキュリティ上の問題が多く非推奨   |
| SMB 2.x / 3.x | TCP 445     | 現在主流。大容量転送やパフォーマンス改善 |

SMB 1.0はWannaCryなどのマルウェアに悪用され話題になったことがある。

今は、SMB 3.x系(暗号化対応)が標準。

=> Windows10/11でも初期状態では無効になっていることが多い

## WindowsとSMB

- WindowsはSMBサーバーとしても、SMBクライアントとしても動作可能
- 共有フォルダを設定するとSMBサーバーとして動作
- 他のPCの共有フォルダを開くとSMBクライアントとして動作

## CIFS

CIFS(シフス)は、Common Internet File System(共通インターネットファイルシステム)の略称。

SMBの古いバージョン(SMB 1.0)をベースに、Microsoftが仕様を公開して名前をつけたものという感じの立ち位置。

厳密には違う部分もあるけど、`CIFS = SMB 1.0`と思ってOK

## memo

- 2025/7/14

  NASにPing飛ぶけど、PC(エクスプローラー)から`\\192.xxx...`でアクセスできない

  PC側(Windows10)のコンパネ => プログラムと機能(表示方法: 小さいアイコン) => Windowsの機能の有効化または無効化

  `SMB 1.0/CIFS ファイル共有のサポート`にチェックを入れて再起動(今回はクライアントのチェックが外れていた)


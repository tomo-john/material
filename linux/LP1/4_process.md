# プロセス管理
プロセスとは、動作中のプログラムをOSが管理する基本単位

## ps
現在実行されているプロセスを表示するには`ps`コマンドを使用する

オプション
- a  : 他ユーザーのプロセスも表示
- f  : 親子関係をツリー状に表示
- u  : ユーザー名も表示
- x  : 制御端末のないデーモンなどのプロセスも表示
- -e : すべてのプロセスを表示
- -l : 詳細な情報を表示
- -p PID : 特定のプロセスIDのプロセス情報のみ表示
- -C プロセス名 : 指定した名前のプロセスのみ表示
- -w : 長い行は折り返して表示

## top
現在実行中のプロセスを継続的に監視するには`top`コマンドを使用

デフォルトではCPUを多く利用している(CPU時間を消費している)順に表示

---

プロセスによっては実行中に他プロセスを起動させることもある

元のプロセスを`親プロセス`、起動されたプロセスを`子プロセス`と呼ぶ

親子関係によるプロセスの階層構造を表示するには`ps -f`か`pstree`コマンドを使用

プロセスは`PID`と呼ばれる固有の識別子を持っており、プロセス開始時に順に割り当てられる

Linuxではシステム起動時に最初にinitプログラムが実行される => initのPIDは通常1

プロセスは開始したユーザーから引き継がれたUID, GIDも持っている

## プロセスの終了(kill)
```
# 3つの書式
kill -[シグナル名orシグナルID] PID

kill -s [シグナル名orシグナルID] PID

kill -SIGシグナル名 PID
```

killはプロセスに対してシグナルを送信する

使用できるシグナルは`kill -l`で確認可能

主なシグナル
|シグナル名 |シグナルID |動作                                             |
|-----------|-----------|-------------------------------------------------|
|HUP        |1          |ハングアップ(端末が制御不能または切断による終了) |
|INT        |2          |キーボードからの割り込み(Ctrl + C)               |
|KILL       |9          |強制終了                                         |
|TERM       |15         |終了(デフォルト)                                 |
|CONT       |18         |停止しているプロセスの再開                       |
|STOP       |19         |一時停止                                         |

シグナルを指定せずにkillコマンドを実行した場合は`TERM`シグナルがプロセスに送られる

```
# 全部同じ
kill 560
kill -TERM 560
kill -15
kill -s TERM 560
kill -s 15 560
kill -SIGTERM 560
```

## pgrep
指定した名前のプロセスに対応するPIDを表示する

killコマンドでPIDを調べる時に便利

オプション
- -u user  : プロセスの実行ユーザーを指定
- -g group : プロセスの実行グループをしてい

## killall
killコマンドはPIDの指定が必要であるが、`killall`はプロセス名で指定が可能

=> 同じ名前のすべてのプロセスにシグナルを送る

## pkill
plillもプロセス名でシグナルを送ることが可能

オプションでユーザーごと、グループごとのプロセスを指定が可能

## ジョブ管理


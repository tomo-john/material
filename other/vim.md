# vim

vim(vi)はLinuxを代表する(最強の)テキストエディタ

コマンドモードと挿入モードを適宜切り替えて使用する

## ノーマルモード

`Esc`キーで挿入モードを解除

`:`を入力時にカーソルが画面最下行へ移動する(メッセージライン)

`:`に続けてコマンドを入力

```
# カーソル移動系
0  : カーソル行の先頭へ
$  : カーソル行の末尾へ
gg : ファイルの先頭(一番上)
G  : ファイルの末尾(一番下)

Ctrl + f : 1ページ下へ
Ctrl + b : 1ページ上へ
Ctrl + d : 半ページ下へ
Ctrl + u : 半ページ上へ

H : 画面の最上行へ
L : 画面の最下行へ

zt : カーソル行が画面の上部へ
zz : カーソル行が画面の中央へ
zb : カーソル行が画面の下部へ

w : 次の単語
e : 単語の最後
b : 手前の単語の最後

# 便利
.        : 直前のコマンドを繰り返す
u        : 直前のコマンド(操作)を取消
ctrl + r : 取消の取消

# 置換(行選択)
1. ビジュアルモードで行を選択
2. :s/置換前/置換後/g

# 置換(全行)
:%s/置換前/置換後/g

# シェルコマンド実行(コマンドモードにて)
:r ファイル名    : ファイルの内容をカレント行以降に読み込む
:!cmd            : vimを終了せずにシェルコマンドを実行できる
:r!cmd           : シェルコマンドの実行結果を挿入する
```

## 挿入モード

```
# ノーマルモードから挿入モードへ
i : カーソル位置から入力開始
a : カーソル右側から入力開始
I : カーソルの行頭から
A : カーソルの末尾から
o : カーソルの下の行から(空行も追加してくれる)
O : カーソルの上の行から
```

## その他

### 改行コードCRLF(win)をLF(Linux)に変換

```
:%s/\r//g
```
- `:%s`: 全体を対象に置換
- `\r` : CR(キャリッジリターン)
- `//g`: グローバルに(複数回)行う

---

### ビジュアルモードで複数行に先頭追加

1. 通常モードでカーソルを追加したい範囲の先頭行に置く

2. `V`を押してビジュアルラインモードに入る(`v`じゃなくて`V`ね)

3. `j`や`↓キー`などで複数行を選択

4. `:`を押す(するとコマンドラインに`:'<,'>`って出てくる)

5. `s/^/xxx/`を入力してEnter(xxxは先頭に追加したい文字列)

  例: 指定した先頭行に`# `をつける場合

  ```
  s/^/# /
  ```

末尾に追加する場合なら`^`の部分を`$`に変えるとok

---

## vim-plug

Vimにプラグインを簡単に追加・削除できる管理ツール。


### インストール

```
curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
```

### .vimrcにプラグインの設定枠を作る

```
# ~/.vimrc編集
# 先頭に以下の3行を追加

call plug#begin('~/.vim/plugged')
 Plug 'jwalton512/vim-blade'
call plug#end()
```

plugにここにプラグイン一覧を書くよと教えている場所。

`plug#begin` 〜 `plug#end` の間だけがプラグイン宣言のエリア。

今回はBlade用の構文ハイライトを追加。

### プラグインをダウンロード

```
# vimを起動して下記を実行
:PlugInstall
```

plugがGitHubからプラグインを取ってきて`~/.vim/plugged/vim-blade`の中に保存。

これで`xxx.blade.php`に色がつくようになった。


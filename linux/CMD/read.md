# read
シェルスクリプト内でユーザーからの入力を取得するために使用される

ユーザーに対して値を入力してもらったり、スクリプト内でファイルの内容を1行ずつ読み取ることも可能

```shell
#!/bin/bash
echo "何か入力して下さい: "
read input
echo "入力されたのは: $input です"
```

## -p: プロンプトメッセージの表示
`echo`を使用せずそのまま入力を求めることができる

```shell
read -p "-pオプションでメッセージ表示できる: " input2
echo "$input2"
```

`-p`オプションの際はすぐにメッセージを続けて記述する必要がある

`read`コマンドではオプションの順番が影響する場合がある

=> `-rp "message"`では正しくmessageの内容を読込む

=> `-pr "message"`では`r "message"`を認識しようとしてエラーになる

## -r: バックスラッシュをエスケープ文字として扱わない
`C:\User\tomo`などのバックスラッシュを含む文字列の場合、

バックスラッシュがエスケープされて正しく読み取れないことがある

`-r`オプションを付与することでそのまま文字列を読み取ることが可能

## -a: 複数の単語を配列として読み取る
入力された文字列をスペース区切りで分割し、それぞれの単語を配列の要素として格納する

```shell
echo "複数の単語を入力(スペース区切り): "
read -a array
for e in "${array[@]}"; do
  echo $e
done
```
- 入力された文字列がスペースで区切られ、それぞれが`array`配列の要素に割り当てられる
- 配列の内容は`"${array[@]}"`で展開できる

`-p`と組み合わせる時は`-a`は後ろ(指定する変数の直前)に置く

```shell
read -p "No.4 複数の単語を入力(スペース区切り): " -a array
```

## -s: 非表示で読み取る(入力を隠す)
パスワード入力などで使用されるオプション

=> 入力内容を画面に表示せずに取得する

```shell
read -sp "パスワードを入力: " password # 入力が表示されない
echo
echo "パスワードが設定されました"
```

## -n: 指定した文字数だけ読み取る
指定した文字数だけ入力を受け付け、入力が完了する

```shell
read -n1 -p "1文字までしか受け付けません: " n # 1文字打った時点で入力待ち終わる
echo
echo "$n"
```

## -t: タイムアウト付きの入力
指定した秒数以内に入力がなければ処理を続行する

```
if read -t 5 -p "No.7 5秒以内に何か入力して下さい: " something; then
  echo "入力値は: $something"
else
  echo "タイムアウトです"
fi
```

## 複数の変数に分割して読込む

```shell
echo "スペース区切りで3つ何かを入力: "
read input1 input2 input3
echo "$input1"
echo "$input2"
echo "$input3"
```
この場合、`john is dog`のような入力はそれぞれ、`input1=john`, `input2=is`, `input3=dog`となる

`john is super dog`のように変数より数が多い場合は`input3`に`super dog`のように残りがまとめて代入される

=> `-a`オプションで配列として格納される点との違いに注意

## デフォルト値の設定

```shell
default_name="じょん"
read -p "名前を決めて下さい(デフォルト名は「じょん」です: " name
name="${name:-$default_name}"
echo "決定した名前は $name です"
```
-  `name="${name:-$default_name}"` => もし変数`name`が空の場合、`$default_name`の値を`name`に代入する
- `:-`は変数が空または未定義の場合に代わりの値を返すというBashの特殊な構文


# systemdのマウント

手動で`mount`コマンドを実行すると、systemdがマウントを検知して、各マウントポイントと同名の「mount」ユニットを自動生成する。

その後もsystemdはマウントポイントや「mount」ユニットの状態を把握しながら監視を行う。

手動でのマウントは`/etc/fstab`に設定がないファイルシステムや、systemdがまだ認識していないファイルシステムに対しても実行可能。

# /var/log/dmesg

`/var/log/dmesg`は、システム起動時点のカーネルメッセージ(リングバッファの内容)が保存されるログファイル。

システムの起動障害を調査する際に役立つ。

/var/log/dmesgは、起動のたびに新しい内容で置き換えられる。

ファイルシステムによっては存在しない場合もある。

カーネルのリングバッファは、カーネルのログメッセージを一時的に保存する固定サイズのデータ領域。

マシンの再起動やシャットダウンによってリセットされる。

運用中は一杯になると古い情報から上書きされていく。

システム起動直後は、/var/log/dmesgとdmesgコマンドが表示する情報は同じ内容。

`dmesg --clear`コマンドはカーネルのリングバッファをクリアするが、/var/log/dmesgファイルの内容が変更されることはない。

リングバッファとログファイルは個別のもので、一方を手動でクリアしても、もう一方には影響を与えない。

# /etc/rc1.d/K01bluetooth

SysVinitでは、システムの起動時やランレベルの変更時にinitが`/etc/inittab`を参照し、

ランレベルに応じたスクリプトを実行して各種サービスを順に起動・停止していく。

各ランレベルに応じたスクリプトは`/etc/rc[0-6].d`に入っている。

例: `K01smartd`

- 1文字目: S(Start: サービスを起動)、K(Kill: サービスを停止)
- 数字: 実行優先順位。若番のものが先に実行される。
- サービス名: 任意の名前をつける

`/etc/rc1.d/K01bluetooth`はrc1.dディレクトリにあるスクリプトであり、`K`から始まるスクリプトなので

シングルユーザーモード(ランレベル1)のサービスを停止させるスクリプトであることがわかる。

# 環境変数 $USER

環境変数`$USER`はログインしているユーザー名を格納する環境変数。


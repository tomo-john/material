# locate

ファイルやディレクトリの名前を検索するためのコマンド。

`find`と異なり、事前に作成されたデータベースを基に検索を行う為`高速`。

## 使用するデータベース

- `/var/lib/mlocate/mlocate.db`を通常使用する
- システム上のファイルパスが記録されており、ファイル名の一部に基づく高速検索が可能

## データベースの更新

- データベースは定期的に更新されるが、最新のファイルやディレクトリ情報がすぐに反映されない場合もあり
- 手動でデータベースを更新したいときは`updatedb`コマンドを使用する

  ```
  # 現在のファイルシステムの状態に基づいて更新される
  sudo updatedb
  ```

## 基本的な使い方

```
locate <検索したいファイル名>
```

```
locate example.txt
```

ファイル名に`example.txt`が含まれる全てのパスが表示される(部分一致も可能)。

`-i`オプションで大文字、小文字を区別せずに検索することが可能。

`-n`オプションで出力件数を指定が可能。

ディレクトリ名を指定し、検索対象を特定のディスク内に限定することも可能。

以下の例では`/home/john`ディレクトリ内でのみ`dog.txt`を検索する。

```
locate /home/john/dog.txt
```

## locateコマンドが参照するデータベース

システム上のすべてのファイルパス情報を事前に収集し、インデックス化したもの

- デフォルトでは通常 `/var/lib/mlocate/mlocate.db` に保存されている
- `updatedb`コマンドによって作成・更新される
- `updatedb`コマンドを制御する設定ファイルは、通常`/etc/updatedb.conf`
- 手動で`updatedb`するか、`cron`などで定期更新しない限りデータベースは自動で更新されない

Debian系のLinuxでは`cron.daily`ディレクトリ内に`updatedb`用のスクリプトが存在し、1日1回自動実行の設定がされていたりする。

```
/etc/cron.daily/mlocate
```


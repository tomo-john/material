# testコマンド

`test`コマンドは、条件文に書かれた式を評価し、真なら`0`・偽なら`0`以外の値を返す。

別の書式として`[]`があり、`[`の後ろと、`]`の前にはスペースが必要。

シェルスクリプトの条件分岐(ifなど)でよく使用される。

```
test 条件文
```

```
[ 条件文 ]
```

## 条件式

### ファイル形式のテスト

| 条件式          | 実行結果                                   |
|-----------------|--------------------------------------------|
| -f ファイル     | ファイルがあれば真(ディレクトリなどは除く) |
| -d ディレクトリ | ディレクトリがあれば真                     |
| -r ファイル     | ファイルが存在し、かつ読み書き可能なら真   |
| -w ファイル     | ファイルが存在し、かつ書き込み可能なら真   |
| -x ファイル     | ファイルが存在し、かつ実行可能なら真       |
| -s ファイル     | サイズが0より大きいファイルがあれば真      |
| -L ファイル     | シンボリックリンクであるファイルがあれば真 |

### ファイル特性のテスト

| 条件式                  | 実行結果                                       |
|-------------------------|------------------------------------------------|
| -e ファイル             | ファイルがあれば真(なにかがあればいい)         |
| ファイル1 -nt ファイル2 | ファイル1がファイル2より修正時刻が新しければ真 |
| ファイル1 -ot ファイル2 | ファイル1がファイル2より修正時刻が古ければ真   |

### 数値のテスト

| 条件式                  | 実行結果                                       |
|-------------------------|------------------------------------------------|
| 数値1 -eq 数値2         | 数値1 =  数値2 で真                            |
| 数値1 -ge 数値2         | 数値1 >= 数値2 で真                            |
| 数値1 -gt 数値2         | 数値1 >  数値2 で真                            |
| 数値1 -le 数値2         | 数値1 <= 数値2 で真                            |
| 数値1 -lt 数値2         | 数値1 <  数値2 で真                            |
| 数値1 -ne 数値2         | 数値1 != 数値2 で真                            |

- e : equal
- g : greater
- l : less
- t : than
- n : not

### 文字列のテスト

| 条件式                  | 実行結果                                       |
|-------------------------|------------------------------------------------|
| -n 文字列               | 文字列の長さが0より大きければ真                |
| -z 文字列               | 文字列の長さが0であれば真                      |
| 文字列1 =  文字列2      | 2つの文字列が等しければ真                      |
| 文字列1 != 文字列2      | 2つの文字列が等しくなければ真                  |
|

### 論理結合

| 条件式                  | 実行結果                                       |
|-------------------------|------------------------------------------------|
| !条件                   | 条件式が偽であれば真                           |
| 条件1 -a 条件2          | 両方の条件が真であれば真(and)                  |
| 条件1 -o 条件2          | いずれかの条件式が真であれば真(or)             |


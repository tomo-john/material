# 共有ライブラリ(Shared Library)

プログラムが共通して使う機能をまとめたファイル。 => Linuxでは拡張子は`.so(Shared Object)`

# /etc/ld.so.cache

プログラムの実行時に、共有ライブラリの場所を検索するために使用されるファイル。

`/etc/ld.so.cache`はバイナリファイルで`ldconfig`コマンドを使用して作成する。

`ldconfig`コマンドは共有ライブラリの検索パスが記述されている`/etc/ld.so.conf`ファイルを参照し`/etc/ld.so.cache`ファイルを作成(更新)する。

`/etc/ld.so.cache`ファイルはバイナリファイルのため、`/etc/ld.so.conf`ファイルより早く検索が可能。

共有ライブラリを使用するプログラムは、実行時に以下の順で共有ライブラリの場所を検索する。

- 1: 環境変数LD_LIBRARY_PATH

  共有ライブラリの検索パスを指定するための環境変数。

- 2: /etc/ld.so.cacheファイル

  共有ライブラリを検索するためのバイナリファイル。ldconfigコマンドを使用して作成する。

  ldconfigコマンドは共有ライブラリパスが記述されている`/etc/ld.so.conf`ファイルを参照し`/etc/ld.so.cache`を作成(更新)する。

- 3: /libと/usr/libディレクトリ

  一般的に使用される共有ライブラリは`/lib`と`/usr/lib`ディレクトリに格納されている。

  64ビット数は`/lib64`と`/usr/lib64`に格納されている。

共有ライブラリを`/lib`や`usr/lib`ディレクトリ以外に配置する場合は、以下のいずれかの方法で共有ライブラリの検索パスを設定する必要がある。

- 環境変数LD_LIBRARY_PATHに検索パスを追加
- /etc/ld.so.confファイルに検索パスを追記してldconfigコマンドで/etc/ld.so.cacheファイルを更新(作成)する

### ldconfig

ライブライキャッシュの更新。

新しい共有ライブラリを追加した後に、`ldconfig`を実行すると、システムがライブラリを認識できるようになる。

### ldd

プログラムが必要とする共有ライブラリを確認することができるコマンド。


# ping

指定したホスト(ホスト名またはIPアドレス)に`ICMP`パケットを送り、その反応を表示する。

=> `IPv6`環境では`ping6`コマンドを使う(使い方は同じ)

=> ホストによってはICMPパケットに制限をかけたり、ファイアウォールでパケット通過を止めている可能性もある

## オプション

- -c : 指定した回数だけICMPパケットを送信(デフォルトは`Ctrl+C`で中止するまでずっと)
- -i : 指定した間隔(秒)ごとにICMPパケットを送信(デフォルトは1秒)

## 出力例

```
# ping -c 4 8.8.8.8

PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=114 time=39.4 ms
64 bytes from 8.8.8.8: icmp_seq=2 ttl=114 time=61.5 ms
64 bytes from 8.8.8.8: icmp_seq=3 ttl=114 time=58.5 ms
64 bytes from 8.8.8.8: icmp_seq=4 ttl=114 time=36.2 ms

--- 8.8.8.8 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 6008ms
rtt min/avg/max/mdev = 36.184/48.893/61.510/11.223 ms
```

### ttl=

`ttl`は`Time to Live(生存時間` => 最初に送信するときに、このパケットは最大で何回ルーターを通っていいか？という上限値を設定しておく値。

- Linuxサーバー : 初期値64
- Windows : 初期値128
- Cisco機器など : 初期値255

=> 初期値はカスタムできるからあくまで目安

=> `ttl=117`なら`Windows(128)から返ってきた => ルーターを11回通った？`みたいな予測はできる

### time

相手にICMPパケットを送って、反応が返ってくるまでにかかった時間。

=> 短ければ短いほど速い

---

## ICMP

Internet Control Message Protocol : インターネット制御メッセージプロトコル。

=> ネットワークの異常や通信状況を知らせるためのメッセージをやり取りするためのプロトコル。

`ping`, `traceroute`コマンドなどで使用される。

---

# traceroute

指定されたホストまでパケットが伝わる経路を表示するコマンド。(IPv6では`traceroute6`コマンド)

`ping`コマンドで反応がなかった場合、ホスト自身に問題があるのか、ホストまでのネットワーク経路までなのかは判断できない。

`traceroute`コマンドでは、宛先までのルータやホストが順に表示されるため、ネットワーク障害箇所の位置を特定できる可能性がある。

オプションに`-n`を指定すると、途中で到達したホストの名前解決をせずにIPアドレスで表示をするため、表示されるまでの時間が早くなる。

---

# tracepaht

tracerouteコマンド同様に指定したホストまでの経路を表示するコマンド。

- `iputils`パッケージに含まれており、多くのLinuxで標準搭載
- `root`じゃなくても実行可能
- 出力がtracerouteより簡略化されていてシンプル

- 宛先までのPathMTUが確認できる => PathMTUとは最大転送単位
- 宛先までの経路が確認できる => これはtracerouteと同じ
- IPv4, IPv6両方に対応している => `-6`オプションを使用するとIPv6にも対応できる


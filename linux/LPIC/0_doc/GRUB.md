# GRUB / GRUB2

GRUB(GRand Unified Bootloader)とGTUB2はLinuxを起動するためのブートローダ。

ブートローダはBIOS/UEFIによって起動され、最終的にOSのカーネルを読込んで起動する役割を持っている。

- OS選択: 複数のOSがインストールされている場合、どれを起動するか選択
- カーネルロード: 選択されたOSのカーネルをメモリにロード
- 初期RAMディスクのロード(initramfs): カーネルが利用する必要なドライバやモジュールを提供
- 制御の移譲: カーネルに制御を渡して、ブートローダの役割を終える。

## GRUB(GRUB Legacy) ver0.9x

GRUBの設定ファイルは`/boot/grub/menu.lst` => 手動で編集が可能。変更後は即座に反映。

ディストリビューションによっては`/boot/grub/grub.conf`の場合もあり。

システムを起動しブートローダがカーネルをロードする際、ブートローダの設定ファイルに記載されていないオプションを、起動オプションとして起動プロンプトで指定が可能。

```
grub> kernel カーネルイメージ [オプション]
```

| 起動オプション  | 説明                                     |
|-----------------|------------------------------------------|
| init=パス       | initの代わりに指定コマンドを実行         |
| root=デバイス名 | ルートパーティションを指定               |
| 数字(0-6)       | 指定したランレベルで起動                 |
| quiet           | 起動中のカーネルからの情報出力を抑制する |

```
# メンテナンス用にシングルユーザーモードで起動
grub> kernel /boot/vmlinuz-2.6.35 1
```

=> 数字の1は`s`, `single`を指定してもシングルユーザーモードで起動が可能

## GRUB2 ver1.9x以降

GRUB2の設定ファイルは`/boot/grub/grub.cfg` => このファイルを直接編集することはない。

設定内容は`/etc/default/grub`ファイルおよび`/etc/grub.d`ディレクトリ内のファイルに記述し、`grub-mkconfig`コマンドで設定内容を`/boot/grub/grub.cfg`ファイルに反映させる。


# ソフトウェア

OSの4つの機能:

- 1 : ジョブ管理
- 2 : タスク管理
- 3 : 記憶管理
- 4 : データ管理

## 1 ジョブ管理

ジョブはOSが扱う。

ジョブはユーザーがコンピューターに依頼する仕事の単位。

ジョブ管理はジョブの実行順序を管理する機能。

### スプーリング

CPUと低速の入出力装置の間のデータ転送を、高速の補助記憶装置に仲介させる技術。

=> プリンターの印刷時によく使われる(プリンターは動作が遅い)

CPUとプリンターの間に補助記憶装置を配置し、そこに一時的にデータを保存する。

プリンターの処理のスピードに合わせて補助記憶装置からプリンターにデータを送る。

### バッファ

スプーリングで使用する補助記憶装置のように、処理速度や転送速度の異なる2つの装置の差を補うことを目的として、`データを一時的に保存する記憶装置`のことをバッファという。

CPUと主記憶装置の処理速度の差を補うキャッシュメモリや、主記憶装置とハードディスクの処理速度の差を補うディスクキャッシュもバッファの1つ。

## 2 タスク管理

タスクとはOSがCPUに出す命令の単位。

- ユーザーがコンピューターに出す命令が`ジョブ`
- OSがCPU(ハードウェア)に出す命令が`タスク(プロセス)`

### マルチタスク

タスク管理によって複数のタスクを頻繁に切り替えることによって、それらのタスクがあたかも同時に実行されているかのように見せる技術。

=> 実際には同時に実行されているわけではない

=> CPUの1つのコアは一度に1つの作業しか実行できない

CPUが単体で行っているわけではなく、OSがCPUを操作することで実現している。

### タスクの切替方法

- プリエンティブ : CPUの使用権をOSが管理(主流)
- ノンプリエンティブ : CPUの使用権をタスクが管理

### タスクの状態

- 実行可能状態 : いつでもタスクを実行できる状態
- 実行状態 : タスクを実行している状態
- 待ち状態 : タスクの入出力処理の完了を待っている状態

実行可能状態のタスクを実行状態に移すことをディスパッチという。(CPUの使用権を割り当てること)

## 3 記憶管理

記憶装置を効率的に利用するための機能。

記憶装置は主記憶装置と仮記憶装置の2つに分類される。

仮記憶装置は補助記憶装置の一部をあたかも主記憶装置であるかのように扱う方式。

=> OSが論理的な記憶領域を作る

### ページング方式

仮想記憶と実記憶をページと呼ぶ固定長の領域に分割して管理する方式。

仮想記憶と実記憶の各ページには先頭から順にアドレスが振られる。

仮想アドレス(仮想記憶のアドレス)、物理アドレス(実記憶のアドレス)はページテーブルと呼ばれる表によって対応付けられる。

### ページフォールト

実記憶に存在しないページへのアクセスによって起こる割り込み。

この割り込みが発生すると、OSはプログラムを実行するための必要なページを補助記憶装置から実記憶へ読込む。

=> これがページイン

実記憶に空きページがない場合は、実記憶から外すページを1つ選び、そのページを実記憶から補助記憶装置へ書き出す。

=> これがページアウト

ページイン、ページアウトはできるだけ発生しない方がCPUの処理効率は高まる。

なので、頻繁に使うページはできるだけ実記憶に残しておき、めったに使わないページを実記憶から外すことが望ましい。


### ページ置き換えのアルゴリズム

- LRU : 最後に参照されてから最も長い時間が経過したページを置き換える(Latest Recently Used)
- LFU : 参照頻度が最も少ないページを置き換える(Latest Frequently Used)
- FIFO : 読込んでから最も長い時間が経過したページを置き換える(First in First Out)

### スラッシング

仮想記憶管理において、割り当てられる実記憶の容量が小さいときにページインとページアウトが頻繁に起こる現象。

# 4 データ管理

コンピューターが処理するデータを管理する機能。

=> ファイルシステムやバックアップなどの機能のこと


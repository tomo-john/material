# OSの改行コード

改行コードと代表的なOSの組み合わせは以下のとおり。

- CRLF(\r\n): Windows
- LF(\n): Unix OS(Linux, Mac OS Xなど)
- CR(\r): 古いMacOS(バージョン9まで)

WindowsとLinuxでは改行コードが異なるため、テキストファイルの扱いが問題になる場合がある。

`CRLF(\r\n)`から`CR(\r)`を取り除くことでLinuxの認識できる`LF(\n)`のみにでき、正しく扱うことができる。

CR(キャリッジリターン)は`^M`という制御コードでも表されるため、Windowsで作成したファイルをLinuxで開くと

末尾に`^M`が表示されることがある。=> 制御コード`^M`を取り除くことでLF(\n)に変換することが可能。

Linux上で制御コードを`^M`を入力するには、`Ctrl+V`, `Ctrl+M`を続けて押下する。

```
# file1.txtのWindows改行コードをLinux改行コードに変換しfile2.txtとして保存

tr -d '^M' < file1.txt > file2.txt

sed s/^M//g file1.txt > file2.txt
```

trコマンドの-dオプションで制御コード`^M`を削除している。

sedコマンドではfile1.txtの中の全ての制御コード`^M`を空白文字に置換(つまり削除)している。

# プロセスの一時停止

プロセスにシグナルを送ることができるコマンドは`kill`および`killall`コマンド。

以下はシグナル名とシグナル番号。

| シグナル名    | シグナル番号 | 動作                               |
|---------------|--------------|------------------------------------|
| HUP(SIGHUP)   | 1            | ハングアップ(端末の切断による終了) |
| INT(SIGINT)   | 2            | 割り込みによる終了(Ctrl+C)         |
| KILL(SIGKILL) | 9            | クリーンアップせずに終了(強制終了) |
| TERM(SIGTERM) | 15           | クリーンアップして終了(デフォルト) |
| CONT(SIGCONT) | 18(環境依存) | 一時停止プロセスの再開             |
| STOP(SIGSTOP) | 19(環境依存) | 一時停止                           |
| TSTP(SIGTSTP) | 20(環境依存) | 端末から入力された一時停止(Ctrl+Z) |

プロセスを一時停止する場合は、killまたはkillallコマンドでSTOPかTSTPシグナルを送信する。もしくはCtrl+Zキーの入力。

# nl / cat 行番号

指定したファイルに行番号をつけて出力するには`nl`や`cat`コマンドを使用する。

### nlコマンドのオプション

| オプション | 説明                                               |
|------------|----------------------------------------------------|
| -b a       | 空行を含めた全ての行に行番号をつける(cat -nと同じ) |
| -b t       | 空行を除いた行に行番号をつける(cat -bと同じ)       |

### catコマンドのオプション

| オプション | 説明                                                |
|------------|-----------------------------------------------------|
| -n         | 空行を含めた全ての行に行番号をつける(nl -b aと同じ) |
| -b         | 空行を除いた行に行番号をつける(nl -b tと同じ)       |

# systemctlコマンド


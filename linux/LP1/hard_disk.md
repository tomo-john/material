# ハードディスクのレイアウト設計

Linuxインストール時にはハードディスクやSSDのパーティションレイアウトを適切に設定する

Linuxインストール時には以下の2つのパーティションが最低でも必要
- ルートファイルシステムに割り当てるルートパーティション
- スワップ領域

## パーティション

以下のディレクトリ群は独立したパーティションに割り当てるのが一般的

- /home
  一般ユーザーがそれぞれ利用するファイルが格納

  ディストリビューションを変更したり、再インストールする際に環境を引き継ぎやすい

- /var
  各種ログファイルや、メールスプールなどの更新頻度の高いファイルが格納

  ログファイルの肥大化で容量を圧迫し他システムに影響するのを防ぐ為に分ける

- /usr
  プログラムやライブラリ、ドキュメントが置かれる

  後からプログラムを追加することがなければ、運用中に容量が増えることは基本的にない

- /boot
  システムによってはディスクの先頭パーティションとして数100MB程度を割り当てた方がいい

  RAIDを利用する場合、内蔵ハードディスク内に/bootパーティションが必要とされることもある

- EFIシステムパーティション(ESP)
  UEFIを使ったシステムではFATファイルシステムでフォーマットされたEFIシステムパーティション(ESP)が必要

  ESPにはOSのブートローダーやデバイスドライバなどが格納

- スワップ領域
  仮想メモリ領域として利用

  仮想メモリ: 物理メモリが不足時にディスクの一部を一時的にメモリの延長として使用する機能

  サイズの目安は搭載物理メモリの1~2倍(物理メモリ1GB => スワップ領域を最低1GB確保)

- /(ルート)
  上記以外はルートファイルシステムとなる

  できるだけ小さい方がいい => ファイルシステム障害時の復旧が容易のため

## パーティションのレイアウト設計

- システム用途
- ディスクの容量
- バックアップ方法
これらを考慮する必要がある

### 例
20GBのハードディスク、512MBのメモリ
- スワップ: 512MB(物理メモリと同程度)
- / : 19GB(残りがルートパーティション)

200GBハードディスク、1GBメモリ、ユーザー100人利用するファイルサーバー(/home以下共有)
- スワップ: 1GB
- /boot: 100MB
- /usr: 10GB
- /var: 10GB
- / : 1GB
- /home: 約180GB

100GBディスク、4GBメモリ、Webサーバー:Apache HTTP Server
- スワップ: 4GB
- /boot: 100MB
- /usr: 10GB
- /var: 20GB
- /var/log: 50GB(Webサーバーのログファイルが容量を必要とする)
- /: 15GB


# シェルスクリプト

## 実行方法

- `bash`コマンド : スクリプトファイルに読み取り権必要・実行権は必要なし => サブシェルが起動
- `source`コマンド : これも読み取り権があればOK => 元のシェル上で実行
- `.`コマンド : `source`の簡略化バージョン => シェルスクリプト内でよく使用される

シェルスクリプトに実行権がついていれば、スクリプト名の指定だけで実行もできる

```
# カレントディレクトリのスクリプトを実行
./ dog.sh
```

## 引数

| 変数名 | 説明                                              |
|--------|---------------------------------------------------|
| `$0`   | シェルスクリプトファイル名(フルパス)              |
| `$1`   | 1番目の引数(2番目が$2、3番目が$3...と続く)        |
| `$#`   | 引数の数                                          |
| `$@`   | すべての引数(スペース区切り)                      |
| `$*`   | すべての引数(環境変数`IFS`で指定されたもの区切り) |

```
bash sample.sh dog john
```

=> dogが1番目の引数、johnが2番目の引数

10個目以降は`${10}`のように指定する。

=> `$10`とすると`$1`0のように解釈される(`$1`が`a`だと`a0`と解釈されてしまう)

ちなみに`$$`は現在のシェルのPIDが格納される。

## 戻り値

コマンドを実行すると、終了時にシェルに対して`戻り値`を返す。

- 正常終了 : `0`
- 正常終了以外 : `0以外`

戻り値は特別な変数の`$?`に格納され、コマンドを実行するたびに初期化される。

---

# その他めも

## スクリプト内でよく使用するコマンド

| コマンド    | 説明                                                     |
|-------------|----------------------------------------------------------|
| test 条件式 | 条件式が真なら0、偽なら0以外を返す => `[ 条件式 ]`が主流 |
| seq         | 連続した数値の自動生成                                   |
| let         | 変数に計算した値を代入できる(算術式の評価)               |
| read        | 入力受付(変数に代入)・ファイル読み込みも可能             |


## if

```
if [ "$age" -lt 2 ]; then    # 2未満 
  echo "まだ子犬だね"
elif [ "$age" -le 10 ]; then # 10以下
  echo "まだ若い犬だね"
else
  echo "You are super dog!"  # 10より大きい(上の2つの条件をどちらも満たさない)
fi
```

## case

```
case $1 in
  1) echo one ;;
  2) echo two ;;
  3) echo three dogs ;;
  *) echo please choice 1 2 3 ;;
esac
```

## for

```
for name in john pyonkichi mocomoca
do
  echo "My name is $name"

  if [ $name = john ]; then
    echo "じょーん"
  fi
done
```

## while

```
count=1
while [ $count -le 10 ] # 10以下の間は真
do
  echo $count           # 今のcountの値を表示
  let count=count+1     # countの値に1プラス
done
```


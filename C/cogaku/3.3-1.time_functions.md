# 時間関数

## 1.日時の取得と表示
日時を取得するためには以下の関数を組み合わせる必要がある

- 1: `time関数`で現在の暦時間を取得
- 2: `localtime関数`で暦時間を地域時間に変換
- 3: 時間を表示

時間関数を使用する場合、`<time.h>`をインクルードする必要がある  

### 1: time
システムロックに従って暦時間を取得する

=> 暦時間とは、万国標準時(UTC)の1970年1月1日の00:00:00からの経過秒数

- 定義: `time_t time(time_t *暦時間の格納先)`
- 使用: `ct = time(NULL)`

`time_t`型は`typedef long time_t;`などのように`<time.h>`で宣言されているデータ型の1つ

暦時間の格納先は、取得した暦時間を格納する変数(`time_t型`)のアドレスかNULLを指定する

リターン値は格納先と同じ内容の暦時間が返される

=> 暦時間の格納先へNULLを指定した場合でも正しく暦時間が返される

### 2: localtime
time値を現在時刻に変換する関数

- 定義: `struct tm *localtime(const time_t *暦時間);`
- 使用: `pst = localtime(&ct);`
- tm型構造体は<time.h>で
  ```c
  struct tm{
    int tm_sec;   // 秒
    int tm_min;   // 分
    int tm_hour;  // 時間
    int tm_mday;  // 日
    int tm_mon;   // 月(0～11: 1月が0)
    int tm_year;  // 年
    int tm_wday;  // 曜日(0～6: 日曜日が0)
    int tm_yday;  // 通算日数(0～365: 1月1日が0)
    int tm_isdst; // 季節時間フラグ
  }
  ```
リターン値はtm型構造体のアドレスが返される

localtimeの変わりにgmtime関数を使用すると、万国標準時(UTC)で詳細時間の取得が可能

=> gmtime関数の使用方法はlocaltimeと同じ

```c
#include <stdio.h>
#include <time.h>

int main(){
  time_t ntime;
  struct tm *pst_tm1;
  char szstr[81];

  ntime = time(NULL);
  pst_tm1 = localtime(&ntime);

  printf("%d年%d月%d日%d時%d分%d秒\n",
        pst_tm1->tm_year+1900,
        pst_tm1->tm_mon+1,
        pst_tm1->tm_mday,
        pst_tm1->tm_hour,
        pst_tm1->tm_min,
        pst_tm1->tm_sec);

  printf("%s", asctime(pst_tm1));

  strftime(szstr, 80, "%Y年%m月%d日%H時%M分%S秒", pst_tm1);
  printf("%s\n", szstr);

  printf("%s", ctime(&ntime));

  return 0;
}
```


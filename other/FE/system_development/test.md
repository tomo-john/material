# テスト

## ホワイトボックステスト

- 単体テストでは通常ホワイトボックステストを行う

入力したデータが、意図どおりに処理されているかを、プログラムの内部構造を分析して確認するテスト手法。

プログラムに記述されているすべての処理を実行し、動作を確認する。

### テストケース

`入力`と`期待される出力`の組み合わせ。

ホワイトボックステストでは、流れ図(フローチャート)に記載されているすべての経路を網羅できるテストケースを用意するのが理想。

=> 大きなプロジェクトではすべての経路を網羅するテストケースを用意するのは現実的ではない

=> 網羅性(網羅の程度)が重要となる

| レベル | 名前                   | 内容                                                           |
|--------|------------------------|----------------------------------------------------------------|
| 1      | 命令網羅               | すべての命令(文)を1回以上実行すること(判定条件は考慮しない)    |
| 2      | 判定条件網羅(分岐網羅) | すべての分岐(ifなど)の真と偽を1回以上通ること                  |
| 3      | 条件網羅               | 複数条件がある場合、個々の条件式が真と偽の両方になるように実行 |
| 4      | 判定条件/条件網羅      | 判定条件網羅と条件網羅を組み合わせたテスト                     |
| 5      | 複数条件網羅           | すべての条件の真と偽の組み合わせを1回以上実行するテスト        |

## ブラックボックステスト

- 結合テスト・システムテストでは主にブラックボックステストを行う

入力と出力だけに着目し、ある入力に対して仕様書どおりの出力が得られるかを確認するテスト手法。

処理の過程ではなく結果を見る。

### 同値分割

- 正しい入力値のデータクラス
- 正しいデータ範囲の上限を超えて無効であるデータクラス
- 正しいデータ範囲の下限を下回って無効であるデータクラス

この3つに分割し、その中から1つの代表地を選んでテストケースとする。

例: 有効値が0～100の場合:

- -∞～-1: -10など
- 0～100: 20など
- 101～∞: 9999など

### 境界値分析(限界値分析)

同値分類と同じようにデータ範囲を、`有効値`、`有効値超過`、`有効値未満`の3つに分類するところまでは同じ。

テストケースには有効範囲の上限値とそれを1つ上回る値、および下限値とそれを1つ下回る値を利用する。

例: 有効値が0～100の場合:

- -1
- 0
- 100
- 101

## 各テストのメリットとデメリット

| 種類     | メリット                           | デメリット                               |
|----------|------------------------------------|------------------------------------------|
| ホワイト | すべての処理(分岐経路)を検証できる | プログラマの誤解によるバグは見つけれない |
| ブラック | 使用どおりに動作するか検証できる   | すべてのテストケースを検証した保証はない |

## トップダウンテストとボトムアップテスト

結合テストで使用される。モジュール同士を組み合わせてテストする。

=> モジュールはプログラムを機能で分けた単位

モジュールはそのコードの中で別のモジュールを読み出す。

このときの呼び出し元が上位モジュールで、呼び出し先が下位モジュールとなる。

トップダウンテストでは上位モジュールから下位モジュールへと順にテストをしていく方法。

この場合は下位モジュールが未完成の場合はテストができない。

トップダウンテストでは`スタブ`と呼ばれるダミーの下位モジュールを用意する。

スタブには、テスト対象のモジュールがスタブを呼び出しても正しく動作が進むように、簡単な戻り値などを設定しておく。

ボトムアップテストでは下位モジュールから上位モジュールへと順番にテストしていく方法。

このときに、ダミーの上位モジュールとして用意するのが`ドライバ`。

---

# その他のテスト関連の用語

## ベンチマークテスト

標準的なプログラムの実行時間を計測することによって、他のコンピュータと性能を比較する。

## リグレッションテスト(退行テスト)

プログラムの修正または変更によって他の機能が意図しない影響を受けていないことを確認する。

## ストレステスト

システムに要求されている処理能力の限界状態いおける動作を確認する。

## ユーザビリティテスト

実際に利用者に使ってもらうことによって、システムの使いやすさを評価する。

## アサーションチェック

プログラムの実行中に、使用されている変数の間で論理的に成り立つ条件をアサーション(Assertion)という。

アサーションチェックは、この条件をプログラムの適切な箇所に挿入。

実行時にその部分のアサーションが成立しているかを検査することで、プログラムの正当性を検証する手法。

## テストカバレッジ分析

プログラムの品質を定量的に把握するために、テストの網羅率(カバレージ)を測定・分析する手法。

## スナップショットダンプ

プログラム中の特定の命令文が実行されるたびに、その時のメモリやレジスタの内容を出力するテスト支援ツール。


# NAT変換

NAT(Network Address Translation)とは、プライベートIPアドレスとグローバルIPアドレスを変換して通信を可能にする技術のこと。

NATと言う言葉自体は、あくまでIPアドレを変換する総称。

家庭や社内のネットワーク内ではプライベートIPアドレス(例: 192.168.1.10)を使っていて、インターネットに出るときはグローバルIPアドレス(例: 203.0.113.1)が必要になる。

NATはこの「中と外のIPアドレスの橋渡し」をしていくれているイメージ。

- プライベートIPアドレス : 家庭やオフィスなどのローカルネットワーク内で使用されるIPアドレス(インターネット上で直接通信はできない)
- グローバルIPアドレス : インターネット上に一意に割り当てられたIPアドレス

NATはプライベートIPアドレスとグローバルIPアドレスを1対1で変換する。

IPアドレスだけでなく、ポート番号も変換し、1つのグローバルIPアドレスを複数のプライベートIPアドレスで共有できるのが`NAPT`

## NAPT

NAPT(Network Address Port Translation)は上記の通り1つのグローバルIPアドレスを複数のプライベートIPアドレスで共有ができる。

NTPTはIPマスカレードやPAT(Port Address Translation)とも呼ばれる。

NAPTでは、ポート番号も使って区別するから、1つのグローバルIPで多数の端末がインターネットに出られるということ。

NTPTは少ないグローバルIPアドレスで多くの端末をインターネットに接続できるため、現在のインターネット環境で広く利用されている。

| 項目           | NAT                              | NAPT                                  |
|----------------|----------------------------------|---------------------------------------|
| IPの変換       | OK(基本は1対1)                   | Very Good(1対多、ポート番号も使う)    |
| ポート番号変換 | NO(変換しない)                   | OKポート番号も変換)                   |
| 実際の機器     | ルーターやファイアウォールなど   | 同上                                  |
| 利用例         | グローバルIPを固定で使う企業など | 一般家庭・社内LANのインターネット接続 |


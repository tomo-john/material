# 1.Linuxの起動プロセス

1.1 BIOS/UEFI
- 電源ONの後、BIOS/UEFIが起動しハードウェアの初期化を行う
- ブートデバイス(HDDやSSD)を特定し、ブートローダを読込む

1.2 ブートローダ(例: GRUB)
- ブートローダはOSカーネルをメモリに読み込み、制御をOSに渡す
- GRUBがよく使われ、複数のカーネルやOSを選択できる機能を持っている

1.3 カーネル起動
- カーネルがロードされると、メモリ管理やデバイスドライバの初期化などが行われる
- カーネルはinitプロセス(PID1)を起動 → このinitがシステム管理を行う最初のプロセス

1.4 initプロセス(SysVinit)
- SysVinitは古くから使用されているinitシステムで、システムのランレベルを管理する
- `/etc/inittab`ファイルを読み、指定されたランレベルに応じたスクリプトを実行
- スクリプトは`/etc/rc.d/`や`/etc/init.d`に配置されている

# 2.SysVinitの仕組み

2.1 ランレベル

SysVinitはシステムを起動する際に、ランレベルを使用して異なる状態を管理する

ランレベルごとに起動するサービスが変わる

- 0: システム停止
- 1: シングルユーザーモード(メンテナンス用)
- 2: マルチユーザーモード(ネットワークなし)
- 3: マルチユーザーモード(ネットワークあり、GUIなし)
- 5: マルチユーザーモード(GUIあり)
- 6: システム再起動

2.2 `/etc/inittab`ファイル

SysVinitでは`/etc/inittab`ファイルを読込んでどのランレベルでシステムを起動するかを決定する

```shell:/etc/inittab
id:3:initdefault:
```

2.3 initスクリプト

各ランレベルに関連するサービスの起動や停止は、`/etc/rc.d`や`/etc/init.d`にあるスクリプトによって管理される

ランレベルごとに`rcX.d`(Xはランレベル)ディレクトリがあり、`S`で始まるスクリプトがサービスを起動し、

`K`で始まるスクリプトがサービスを停止する

# 3.システムの停止・再起動
- システム停止はランレベル`0`、再起動はランレベル`6`
- `init 0`や`init6`のように`init`コマンドでランレベル変更が可能
- `shutdown`, `reboot`コマンドでも操作は可能


# ハードウェア

## BIOS / UEFI

BIOSはキーボードやハードディスクなどのデバイスを制御する最も基本的な制御プログラム

マザーボードや拡張カードに搭載されたフラッシュROMに書き込まれている

- OS起動の為のプログラムをディスクから読み込んで実行
- デバイスの動作を設定
- 基本的な入出力の制御

UEFIはBIOSの後継となるファームウェア企画

起動ドライブの容量制限がなくなったり、GUIベースのセットアップ画面が利用できるなどの拡張あり

## デバイス情報

Linuxはハードウェアのアクセスを抽象化する`デバイスファイル`を持っている

デバイスファイルの読み書きを通してハードウェアにアクセスができる

デバイスファイルは`/devディレクトリ`に格納されている

=> `udev`という仕組みによって自動的に生成される

Linuxカーネルが認識しているデバイスに関する情報の一部は`/procディレクトリ`以下のファイルで確認ができる

|ファイル名      |内容|
|----------------|---------------|
|/proc/cpuinfo   |CPU情報        |
|/proc/interrupts|IRQ情報        |
|/proc/ioports   |I/Oアドレス情報|
|/proc/meminfo   |メモリ情報     |
|/proc/bus/usb/xx|USBデバイス情報|
|/prc/bus/pci/xx |PCIデバイス情報|

デバイス情報を確認するための各種コマンドも用意されている

`lspci` : PCIデバイス情報を表示

=> -v, -vv オプションで詳細情報も表示する


## USB

Universal Serial Bus

- Max127台までのUSBデバイスを接続可能
- 同一のコネクタで接続可能
- 電源を入れたまま接続・取り外しが可能
- USBポートからUSBデバイスに電源を供給可能

`lsusb` : USBデバイス情報を表示する

=> -v : 詳細表示 / -t : ツリー上に表示

## udev

Userspace DEVice management

/devディレクトリ以下のファイルはudevの仕組みで自動生成される

①デバイス接続 → カーネルが検知

②/sysディレクトリ以下にデバイス情報を作成

③udevデーモンがそのデバイス情報を参照して/dev以下にデバイスファイルを作成

=> /etc/udev/rules.d以下の設定ファイルが使用される

## デバイスドライバのロード

デバイスドライバ : デバイスを利用するために必要な制御プログラム

`lsmod` : ロードされているカーネルモジュールを確認

`modprobe` : 手動でロードする(通常、必要なデバイスドライバは自動的にロードされる)


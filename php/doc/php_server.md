# PHP組み込みWebサーバー

`php -S`コマンドでPHPの組み込みWebサーバーをローカルで起動させることができる。

`php -S localhost:8000`とするとローカルの8000番ポートで起動する。

=> [http://localhost:8000/](http://localhost:8000/) でアクセスできる

## php -Sの裏側

### 1. サーバー起動

`php -S localhost:8000`を実行すると、

PHPが小さいWebサーバー(ビルトインサーバー)を作る。

ApacheやNginxの超簡易版みたいなもの。

### 2. リクエスト受信

ブラウザが`http://localhost:8000`にアクセスすると、

PHPがそのリクエストを受け取る、

### 3. 処理

- HTMLファイル => そのまま返す
- PHPファイル => PHPが中のコードを実行して、結果をHTMLとして作る

### 4. レスポンス返却

作ったHTMLをブラウザに送り返す。ブラウザはそれを表示するだけ。

## index.php(index.html)

`php -S`でサーバーを起動すると、ディレクトリの中に`index.php`(または`index.html`)があれば、そのファイルがデフォルトで自動的に読み込まれる。

### 優先順位のイメージ

PHPのビルトインサーバーは、基本的にこんな順番で探す。

- 1. アクセスされたURLに完全一致するファイルがあるか探す
- 2. なければ、そのディレクトリの中の`index.php`
- 3. なければ、そのディレクトリの中の`index.html`
- 4. どちらもなければ404エラー


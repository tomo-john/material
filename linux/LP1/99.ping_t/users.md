# ユーザー・グループ関連コマンド

- `useradd`: ユーザー追加
- `adduser`: ユーザー追加

  => adduserはディストリビューションによって異なる

  => Ubuntuは対話式、RedHat系は`useradd`と同じ

- `userdel`: ユーザー削除
- `groupadd`: グループ追加
- `groupdel`: グループ削除
- `passwd`: パスワード変更

## useradd

ユーザーを追加する

- `-g`, `-G`: それぞれのプライマリグループ、セカンダリグループを指定
- `-m`: ホームディレクトリを作成
- `-D`: ユーザー作成時のデフォルトの設定を表示(ユーザー作成はしない)

ユーザーは必ずグループに所属する

グループには以下の2つがある

- プライマリ(基本)グループ: デフォルトのグループ
- セカンダリ(サブ)グループ: プライマリグループのほかに所属しているグループ

ディストリビューションによっては、ユーザー追加時にユーザー名と同じグループが追加される

## passwd

パスワードの設定を行う

作成したユーザーがログインするには、`passwd`コマンドによるパスワードの設定が必要

一般ユーザーでは自分のパスワードのみを変更できるが、`root`ユーザーであれば他社のパスワードを変更可能

パスワードは短すぎたり、辞書に掲載されている単語であるなどの理由で設定できないことがある

=> 設定の厳しさはシステム管理者の設定による

`passwd`コマンドでは、パスワードの有効期限やユーザーをログインできないようにロックすることもできる

- `-l`: ユーザーをロック(ログインできなくする)
- `-u`: ユーザーのロックを解除する(ログインできるようにする)

## userdel

ユーザーを削除する

- `-r`: ユーザーのホームディレクトリやメールも一緒に削除

ユーザーが作成したファイルなどは、ホームディレクトリにあるもの以外はデフォルトでは削除できないため、手動で削除する必要がある

削除したユーザーが所持していたファイルなどは、ファイルの所有者がUIDに置き換わる

## groupadd

グループを新規に作成

## groupdel

グループを削除する

=> 削除しようとしているグループがユーザーのプライマリグループ設定されている場合は削除できない


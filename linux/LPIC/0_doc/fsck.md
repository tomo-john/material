# fsck

fsck(File System Consistency Check)コマンドはファイルシステムの整合性をチェック、および問題を修復することができるコマンド。

通常はマウントされているデバイスには実行できない。

```
fsck [オプション] デバイス名
```

### オプション

| オプション                | 説明                                                     |
|---------------------------|----------------------------------------------------------|
| -t ファイルシステムの種類 | ファイルシステムの種類を指定                             |
| -A                        | /etc/fstabに記述されている全ファイルシステムに対して実行 |
| -N                        | 実際には実行せず、実行する内容を表示                     |
| -a                        | 問題を自動的に修復                                       |
| -r                        | 問題を対話的に修復                                       |

### 実行タイミング

fsckは一定のマウント回数や期間に応じて実行されることもある。

`tune2fs`コマンドによって設定の変更や確認が可能。

----

# tune2fs

tune2fsコマンドはext2/ext3/ext4ファイルシステムの設定を変更・最適化するコマンド。

マウント回数、fsckの実行頻度、予約ブロックの割合、ファイルシステムのラベル変更などの設定が可能。

| 機能                         | オプション     | 説明                                         |
|------------------------------|----------------|----------------------------------------------|
| スーパーブロック情報の表示   | -l             | ファイルシステムの詳細情報を確認             |
| マウント回数のリセット       | -c 0           | ファイルシステムチェック(`fsck`)の頻度を変更 |
| 最大マウント回数の変更       | -c 回数        | 指定した回数で`fsck`を実行                   |
| チェックの間隔の変更         | -i 時間        | `fsck`の実行間隔を設定                       |
| ラベルの変更                 | -L ラベル名    | デバイスのラベルを設定                       |
| UUIDの変更                   | -U UUID        | UUIDを変更                                   |
| 予約ブロックの割合変更       | -m 割合        | root向けの予約領域を変更                     |
| ジャーナリングを有効化(古い) | -j             | ext2をext3に変換                             |
| ジャーナリングを有効化(新)   | -O has_journal | ext2をext3に変換                             |


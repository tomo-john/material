# 共用体

## 1.共用体とは
同一のメモリ領域を異なる型の別の変数名で操作することができる

例えばlong型のl1とchar型のc1を共用体にし、同一のメモリ領域に配置

=> l1のデータを変更するとc1も変更され、c1を変更するとl1も変更される

変数のメモリ領域は独立したメモリ領域が割り当てられていたが、共用体では同一のメモリ領域を共有する

## 2.共用体の宣言
```c
union タグ名{
  データ型1 メンバ名1;
  データ型2 メンバ名2;
  ...
  データ型n メンバ名n;
};
```
- タグ名: 型の名前
- データ型: メンバ名のデータ型
- メンバ名: 変数名
データ型には構造体を指定することも可能

構造体と同様に、データ型の宣言だけでは使用することができないので変数を宣言する必要あり

```c
union タグ名 変数名;
```

通常のデータと同様に配列にすることもできるし、ポインタの宣言をすることも可能
```c
union タグ名 変数名[要素数]; // 配列
union タグ名 *変数名;　// ポインタの宣言
```

共用体宣言時に変数名を同時に宣言することも可能
```c
union タグ名{
  データ型1 メンバ名1;
  データ型2 メンバ名2;
  ...
  データ型n メンバ名n;
} 変数名;
```

共用体は宣言されたすべてのメンバを包括できるサイズが割り当てられる

=> char, short, longがメンバにあれば一番大きな4バイトが割り当てられる

## 3.共用体の初期化
```c
union A{
  char c1;
  long l1;
};
```
と宣言されている共用体を`a`と初期化する場合
```c
union A una = {'a'};
```
となる

=> char型でありlong型ではあるが、最初のメンバのchar型の値だけで初期化が可能

=> `union A una = {1000000L};` のような初期化はできない

## 4.メンバの参照
共用体のメンバの参照は構造体と同じで、`共用体変数名.メンバ名`のように`.`を使用する

`union タグ名 *共用体変数名;`のようにポインタ変数で宣言している場合は、`共用体変数名 -> メンバ名`


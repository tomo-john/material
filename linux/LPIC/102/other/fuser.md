# fuser

fuserはfile userの略で、ファイルやソケットなどのリソースを使用中のプロセスを調べるためのコマンド。

=> システムの特定のリソースを使用中のプロセスを検索し、強制終了させることができる。

```
fuser [オプション] 対象
```

対象にはファイル・ディレクトリ(マウントポイント)・ポートなどの指定が可能。

## オプション

| オプション | 説明                                        |
|------------|---------------------------------------------|
| -k         | プロセスにSIGKILLを送信(kill)               |
| -m         | マウントされたファイルシステムを指定(mount) |
| -n         | 検索する領域(名前空間)を指定(namespace)     |
| -u         | 検索結果にユーザー名を追加(user)            |
| -v         | 詳細な情報を表示(verbose)                   |

## 1. 特定ファイルを使っているプロセスを調べる

```
fuser /var/log/syslog
```

## 2. 特定ディレクトリ(例: マウントポイント)を使っているプロセスを表示

```
fuser /mnt/usb
```

指定したパスがマウントポイントorマウントは以下のファイルときは`-m`オプションを使用:

```
fuser -muv /mnt
```

## 3. プロセスを強制終了

```
fuser -m /mnt -k
```

## 4. -n(名前空間)

```
fuser -n [名前空間] 対象
```

名前空間とは、`fuser`が何の種類のリソースを対象にするかを指定する。

### 名前空間の例

- tcp : TCPポートを使用しているプロセスを調べる
- udp : UDPポートを使用しているプロセスを調べる

```
fuser -n tcp 22
```

=> ポート22(SSH)を使用しているプロセスのPIDが表示される

```
fuser -k -n 8080
```

=> ポート8080を使用しているプロセスを強制終了


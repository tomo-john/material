# ブートローダ

ハードディスクなどのストレージからOSを読み込んで起動するプログラムをブートローダ(ブートマネージャ)という

Linuxの代表的なブートローダはGRUB(GRand Unified Bootloader)

## 1 GRUBのインストール

GRUBは多機能なブートローダ

- 多数のファイルシステムを認識可能
- シェル機能を搭載し、コマンドによる高度な管理が可能

`grub-install` コマンドでブートローダとしてGRUBをインストール

```
# /dev/sdaのMBR(マスターブートレコード)領域にGRUBをインストール
grub-install /dev/sda
```

## 2 GRUB Legacyの設定

設定ファイルは`/boot/grub/menu.lst`

ディストリビューションによっては`/boot/grub/grub.conf`

|パラメータ |説明                                                  |
|-----------|------------------------------------------------------|
|timeout    |メニューを表示している時間(秒)                        |
|default    |デフォルトで起動するエントリの番号                    |
|title      |メニューに表示するエントリ名                          |
|root       |ルートデバイスの指定                                  |
|kernel     |起動するカーネルイメージファイルと起動オプションの指定|
|makeactive |ルートパーティションをアクティブ化                    |
|chainloader|指定されたセクタの読み込みと実行                      |
|hiddenmenu |起動時に選択メニューを表示しない                      |

## 3 GRUB2の設定

GRUB 2の設定ファイルは`/boot/grub/grub.cfg`

GRUB Legacyと異なり、直接ファイルを編集することはしない

`/etc/default/grub`で設定を行い、`grub-mkconfig`コマンドの実行で設定ファイルが生成される

|パラメータ        |説明                                                            |
|------------------|----------------------------------------------------------------|
|GRUB_TIMEOUT      |メニューを表示している時間(秒)                                  |
|GRUB_DEFAULT      |起動メニュータイムアウト時にデフォルトOSとして選択されるエントリ|
|GRUB_CMDLINW_LINUX|カーネルに渡される起動オプション                                |

## 4 ブートオプションの指定

ブートローダ起動時に、システムの動作を指定するためのさまざまなブートオプションを指定できる

起動時の画面で`Eキー`を押すと`grub append> ro root=/dev/VolGroup00/LogVo100 rhgb quiet`のような画面が表示される

=> ここでキーボードからオプションを入力できるようになる

root=デバイス : ルートパーティションとしてマウントするデバイス

nousb : USBデバイスを使用しない

single : シングルモードで起動する

1~5 : 指定したランレベルで起動

```
# シングルユーザーモードで起動
grub append> ro root=/dev/VolGroup00/LogVo100 rhgb quiet single
```


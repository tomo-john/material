# GRUB2

GRUB2の設定ファイルは`/boot/grub/grub.cfg`。これを直接編集することはない。

設定内容は`/etc/default/grub`および`/etc/grub.dディレクトリ内のファイル`に記述し、`grub-mkconfig`で設定内容を反映。

GRUB Legacy(GRUB1)の設定ファイルは`/boot/grub/menu.lst`, `/boot/grub/grub.conf`。

GRUBのバージョンが0.9x系のものを`GRUB Legacy`、1.9以降のものを`GRUB2`と呼ぶ。

GRUB Legacyではディスク番号、パーティション番号ともに0から数える。

GRUB2ではディスク番号は0から、パーティション番号は1から数える。

# systemd

systemdで扱う処理はUnitという単位で管理する。

Unitは各機能ごとに拡張子が割り当てられており、拡張子を見ることでどういった機能のためのUnitか判別ができる。

| 拡張子  | 機能                                        |
|---------|---------------------------------------------|
| device  | 各種デバイスを管理するUnit                  |
| mount   | ファイルシステムのマウントを管理するUnit    |
| service | サービスを制御するUnit                      |
| swap    | スワップ領域を管理するUnit                  |
| target  | 複数サービスを1つのグループにするためのUnit |

# ランレベルとターゲット

| ランレベル | ターゲット        |
|------------|-------------------|
| 0          | poweroff.target   |
| 1          | rescue.target     |
| 2,3,4      | multi-user.target |
| 5          | graphical.target  |
| 6          | reboot.target     |

ターゲットは`/lib/systemd/system`配下に格納されている。

SysVinitとの関連がわかりやすいように、runlevel0.target～runlevel6.targetまでのシンボリックリンクも用意されている。

Systemdが動作するシステムにおいて、起動時の最初に読込まれるUnitは`/etc/systemd/default.target`。

default.targetを起動させたいUnitへのシンボリックリンクを作成することで、期待するサービル群を起動できるようになる。

# 環境変数

| 環境変数     | 説明                                             |
|--------------|--------------------------------------------------|
| HISTFILE     | コマンド履歴保存ファイルのパス                   |
| HISTSIZE     | 現在のシェルでのコマンド履歴の保存数             |
| HISTFILESIZE | コマンド履歴保存ファイルへの履歴保存数           |
| HOSTNAME     | ホスト名                                         |
| HOME         | ログインしているユーザーのホームディレクトリ     |
| LANG         | ロケール(言語設定)                               |
| PATH         | コマンドやプログラムを検索するディレクトリのパス |
| PWD          | カレントディレクトリのパス                       |
| USER         | ログインしているユーザー                         |

環境変数を作成するときは`export`コマンドを使用する。

```
# export 環境変数名=値
export NAME=john

# export シェル変数名
NAME=john    # シェル変数を作成
export NAME # シェル変数を環境変数へ(このとき$はつけない)
```

設定されている環境変数を確認するには以下のコマンドを使用する。

| コマンド | 説明                             |
|----------|----------------------------------|
| set      | 全てのシェル変数と環境変数を表示 |
| env      | 全ての環境変数を表示             |
| printenv | 一部、または全ての環境変数を表示 |

```
# 環境変数$NAMEが設定されているか確認
env | grep NAME
```

個々の環境変数の確認であれば`echo`コマンドの引数に指定することで確認することも可能。

変数と文字列が連続して使用される場合などで、シェル変数名の範囲を正確に認識するために、`${変数名}`の形式で表記も可能。

```
echo "私の名前は${NAME}dogです。"
```

# lsmod


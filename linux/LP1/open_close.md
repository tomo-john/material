# Linuxの起動とシャットダウン

## 起動

①BIOS/UEFIが起動

②ハードウェアのチェックや初期化を行い、ブートローダーを呼び出す

③ブートローダーは起動デバイス上からカーネルをメモリ上へ読み込む

④カーネルはメモリの初期化、システムクロックの設定を行い、仮のルートファイルシステムをマウント

=> 仮のルートファイルシステム : 初期RAMディスク(initramfs)

=> 初期RAMディクスにはシステム起動に必要なデバイスドライバが組み込まれている

⑤カーネルが最初のプロセスであるinit(またはsystemd)プロセスを実行

⑥initが必要なサービスなどを順次起動していき、最後にログインプロンプトを表示する

BIOS → ブートローダー → カーネル → init/systemd

電源を入れてからシステムが起動するまでの処理の流れをブート(boot)という

`dmegs` コマンドではシステム起動時にカーネルがどのような処理を行ったか確認ができる

=> カーネルが出力したバッファの内容なので古いものは消されていく

`/var/log/messages` や `/var/log/dmesg` や `/var/log/boot.log` にも保存されている

## シャットダウン

```
shutdown [オプション] 時間 [メッセージ]
```

主なオプションたち
- -h : シャットダウン
- -r : 再起動
- -f : 次回起動時にfsckをスキップ
- -F : 次回起動時にfsckを必ず実行
- -k : 実際にはシャットダウンせず警告メッセージを通知
- -c : 実行中のシャットダウンをキャンセル

```
# ログインユーザーにメッセージを表示、5分後にシステム停止
shutdown -h +5 "Please logout immediately."
```


# クラスとCIDR

- クラス : 昔のネットワークは、IPアドレスを`クラス`というルールで分けていた(A～C: 一般用 / D,E: 特殊)
- CIDR : クラスにとらわれず、柔軟にネットワークを分けるために登場した

# クラス

| クラス | 先頭のビット | 先頭のアドレス範囲           | デフォルトのサブネットマスク | 主な用途           | 
|--------|--------------|------------------------------|------------------------------|--------------------|
| A      | 0xxxxxxx     | 1.0.0.0 ～ 126.255.255.255   | 255.0.0.0（/8）              | 大企業向け         |
| B      | 10xxxxxx     | 128.0.0.0 ～ 191.255.255.255 | 255.255.0.0（/16）           | 中規模ネットワーク |
| C      | 110xxxxx     | 192.0.0.0 ～ 223.255.255.255 | 255.255.255.0（/24）         | 小規模ネットワーク |
| D      | 1110xxxx     | 224.0.0.0 ～ 239.255.255.255 | -                            | マルチキャスト用   |
| E      | 1111xxxx     | 240.0.0.0 ～ 255.255.255.255 | -                            | 実験用(使わない)   |

- クラスA～Cが通常のIPアドレス
- DとEは特殊用途

IPv4アドレスは`0.0.0.0～255.255.255.0`まで、`2の32乗個(約43億個)`ある。

=> 全部が使用できるわけではない

クラスAの中には特殊はIPが存在しており使用できないIPが存在する。

| IP                         | 状態・意味                                | 使用可能？ |
|----------------------------|-------------------------------------------|------------|
| 0.0.0.0                    | 自分がまだIPを持っていないとき / 全体指定 | X          |
| 0.0.0.0～0.255.255.255     | このネットワーク上のホストなどの特殊表現  | X          |
| 1.0.0.0～126.255.255.255   | 通常使用可能                              | O          |
| 127.0.0.0～127.255.255.255 | 自分自身を表す(ループバック)              | X          |

## プライベートアドレスIPアドレス

インターネット上では使えない、家庭や会社などのローカル(内部)ネットワーク専用のIPアドレスのこと。

外のネットワーク(インターネット)では使われないように特別に予約された範囲のアドレス。

IPv4アドレス(約43億個)だけでは世界中のスマホやPCに足りない。

=> 家の中や会社だけで使用できる番号を決めて、外では使わないことで節約している

| クラス | プライベートIPの範囲             | CIDR            | 使用例               |
|--------|----------------------------------|-----------------|----------------------|
| A      | `10.0.0.0 ～ 10.255.255.255`     | `10.0.0.0/8`    | 大規模社内ネットなど |
| B      | `172.16.0.0 ～ 172.31.255.255`   | `172.16.0.0/12` | 中規模のLANなど      |
| C      | `192.168.0.0 ～ 192.168.255.255` | `192.168.0.0/16`| 家庭用Wi-Fiなど      |


`IPv4アドレス全体` - `特殊用途` - `プライベートIP` = `グローバルIP`

# CIDR

IPアドレスのうち、ネットワーク部分が何ビットか示す表記。

`172.16.0.0/12` => これはネットワーク部分が先頭から12ビット(`/12`)

IPアドレスは32ビットなので、この場合は20ビット(`32 - 12`)がホスト部になる。

### ビットで見る

- `172.16.0.0` => 2進数で : `10101100.0001****.********.********`
- `****`の部分(ビットが変化できる)で範囲が決まる

````
第2オクテットが 00010000(16) ～ 00011111(31)
=> 結果 : 172.16.0.0 ～ 172.31.255.255
```

### よく出るCIDR表

| CIDR  | サブネットマスク | 使用可能ホスト数(理論上)  | よく使われる用途                   |
|-------|------------------|---------------------------|------------------------------------|
| `/8`  | `255.0.0.0`      | 約1677万(2の24乗 − 2)     | クラスA、例：10.0.0.0/8            |
| `/12` | `255.240.0.0`    | 約104万(2の20乗 − 2)      | クラスBプライベート：172.16.0.0/12 |
| `/16` | `255.255.0.0`    | 約65,000(2の16乗 − 2)     | クラスB、例：192.168.0.0/16        |
| `/24` | `255.255.255.0`  | 254(2の8乗 − 2)           | クラスCなど、小さなネット          |

### /26でのホスト数の求め方

- `/26` => 32ビット中、最初の26ビットが`ネットワーク部`
- 残りの`32 - 26 = 6ビット`が`ホスト部`

なのでホストアドレスの数は`2の6乗`で64個。

ここからネットワークアドレスとブロードキャストアドレスの2つを引いた`62個`がホスト数の数。


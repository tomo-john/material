# 記憶装置

メモリとは記憶装置。

- 主記憶装置
- 補助記憶装置
- キャッシュメモリ

## 主記憶装置

CPUが直接読み書きする記憶装置。いわゆるメインメモリってやつ。

命令やデータを一時的に保管しておく場所。

特徴:

- データを高速に出し入れできる
- 電源を切るとデータは消える(RAM)

RAMは揮発性なので電源が切れるとデータが消滅する。

主記憶装置はDRAM・SDRAM。

DRAMは耐えずリフレッシュを行っている。回路が単純で容量が大きいものを安く作れる。

SDRAMのSは`Synchronous`で同期の意味。クロックと同期して動作する半導体メモリ。

## 補助記憶装置

いわゆるHDDやSDD。データの長期保存(電源切ってもデータ消えない)が可能。アクセスは主記憶より遅い。

## キャッシュメモリ

CPUと主記憶装置の間にある超高速の記憶装置。

CPUはキャッシュメモリを使用して処理の待ち時間を短縮する。

キャッシュメモリに比べると主記憶装置でさえ遅い。(CPUさんの速さをさばけない)

CPUから主記憶装置へのデータの読み書きはキャッシュメモリを介して行われる。

なので頻繁に使用するデータは主記憶装置ではなく、キャッシュメモリに保存する方が処理効率が良い。

CPU内部に内部キャッシュメモリ(1次キャッシュや2次キャッシュ)と置き、CPU外部に外部キャッシュメモリ(3次キャッシュ)を置いてるのが一般的。

=> 多段キャッシュ

キャッシュメモリはSRAMで作られている。

SRAMはDRAM(SDRAM)と異なりリフレッシュ不要で超高速。でも値段が高い。ので容量は少ない。

つまり、CPUがデータを見に行く時にはキャッシュメモリにある方が全然いい。

でも、容量少ないのないときもある。(そのときは主記憶を見に行く)

必要なデータがキャッシュメモリ上に配置されている確率をヒット率という。

```
# CPU => キャッシュメモリ
ヒット率

# CPU => 主記憶装置
1 - ヒット率
```

キャッシュメモリを利用したときのアクセス時間のことを`実効アクセス時間`という。(実行じゃない :dog: )

=> 実効とはキャッシュメモリを用いたときの実際の効き目

データの読み込みはキャッシュメモリになければ、主記憶装置に見に行くのでシンプル。

データを書込むときは、キャッシュメモリと主記憶装置のどちらに書込む方が効率がいいか考える必要がある。

=> ここで、ライトスルー方式とライトバック方式が出てくる

- ライトスルー方式 : キャッシュメモリと主記憶装置に同時に同じデータを書込む => 仕組みはシンプルだけどライトバックより遅い
- ライトバック方式 : キャッシュメモリから不要なデータを追い出すときに主記憶装置に書込む => 仕組みは複雑だけどライトスルーより速い

---

# レキシスゴイハヤイ

- レ : レジスタ
- キ : キャッシュメモリ
- シ : 主記憶装置
- ス(スゴイ) : SSD(補助記憶)
- ハ(ハヤイ) : HDD(補助記憶

---


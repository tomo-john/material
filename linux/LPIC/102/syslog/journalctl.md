# journalctl

systemd採用のシステムでは`journalctl`コマンドでsystemdのログ(ジャーナル)を閲覧できる。

引数なしで実行するとlessなどのページャで1ページごとにログが表示される。

| オプション        | 説明                                               |
|-------------------|----------------------------------------------------|
| -f                | ログの末尾を表示しつづける                         |
| -r                | ログを新しい順に表示する(デフォルトは古いものから) |
| -e                | ジャーナルの末尾(最新)を表示                       |
| -x                | 説明文付きで表示                                   |
| -k                | カーネルメッセージのみを表示                       |
| -b                | ブート時のメッセージを表示                         |
| -p プライオリティ | 指定したプライオリティよりも高いメッセージを表示   |
| -u Unit名         | 指定したUnitのログを出力する                       |
| --full            | エスケープ文字を除いてプレーンテキストで出力       |
| --no-pager        | 1ページごとに表示せず、すべてのログを出力          |

ログが保存されているのは`/var/log/journal`や`/var/run/log/journal`などのディレクトリ内にあるバイナリファイル。

ログは一定量を超えると古いものから消去されていく。

systemdによるジャーナルは、`/run/log/journal`、`/var/log/journal`ディレクトリに格納されており、これらもバイナリファイル。

=> 設定によってはシステムの再起動で消える

=> 設定ファイルの`/etc/systemd/journald.conf`で`Storage=persistent`となっていれば永続的に保存される

=> `Storage=auto`かつ`/var/log/journal`ディレクトリが存在しなければ`/run/log/journal`ディレクトリ以下に保存される

設定変更時はsystemd-journaldの再起動が必要。

```
systemctl restart systemd-journald
```


# データ転送

- ネットワーク : 複数のコンピューターを`回線`でつないだシステム
- 回線 : `データ`が通る線(伝送路・通信回線って言うこともある)

通信回線を使ってデータを送る方式には回線交換方式とパケット交換方式の2種類がある。

- 回線交換方式 : 通信回線を占有してデータをやり取りする => 伝送時間が遅くならない
- パケット交換方式 : データをパケット単位に分割し、複数の回線でデータをやり取りする

`パケット`とは、データを小分けにして、それぞれにヘッダー(制御情報)をつけた単位のこと。

ネットワーク(回線)を使用してデータをやり取りするには、以下の仕組みが必要。

- アナログ信号をデジタル信号に変換する仕組み
- データ転送中の誤りを見つける仕組み

通信中に、電気的なノイズなどの影響(電圧の変化)でビットの0と1が入れ替わってしまうことを`ビット誤り`という。

データを正しく転送するためには、このビット誤りを見つけて、正しいデータに直す必要がある。

ビット誤りを見つける方法には`パリティチェック方式`や`CRC方式`などがあり、これが試験に出る。

## パリティチェック方式(奇偶検査方式)

送信するビット列に検査用のビットを付け加えて送る方式。

送られたビット列と、検査用のビットを比べることでビット誤りを見つける。

ビット列の末尾に付け加える検査用ビットのことを`パリティビット`という。

- 奇数パリティ : ビット列の「1」の総数が奇数になるようにパリティビットを付ける
- 偶数パリティ : ビット列の「1」の総数が偶数になるようにパリティビットを付ける

偶数パリティの例:

| データ | 1の数 | パリティビット | 説明                                 |
|--------|-------|----------------|--------------------------------------|
| 101000 | 2個   | 0              | 2は偶数 => ビット加えなくてok        |
| 101001 | 3個   | 1              | 3は奇数 => 偶数になるように1を加える |

=> 偶数パリティの1が付いているのに、1の総数が奇数になっていたら、データに誤りがあることがわかる :dog:

パリティチェック方式では1ビットの誤りは検出可能だが、複数ビット(例えば2ビット誤れば正しいと誤認識)の誤りは検出できない。

なので次の`CRC方式`が現在は主流。

## CRC方式

CRC(Cyclic Redundancy Check)方式では、データをあらかじめ決められた`多項式(生成多項式)`で割り算し、その余りをチェックデータとして付与してデータを送る。

データを受け取った側は、同じ生成多項式で計算しチェックデータと同じであれば誤りなしと判断できる。


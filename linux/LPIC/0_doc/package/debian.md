# Debian系パッケージ管理ツール

Debian系パッケージ管理ツールには以下のようなものがある。

- dpkg: `.deb`ファイルを直接管理、ローカルの`.deb`のインストールや削除
- apt-get: パッケージの取得や管理(リポジトリ・依存関係の調整) => インストール・アンインストール・アップグレード
- apt-cache: パッケージ情報の検索・取得
- apt: apt-getとapt-cacheの統合版

# dpkgツール

Debian系パッケージを管理する基本的なツール。

=> 設定ファイルは`/etc/dpkg/dpkg.cfg`

dpkgツールの主なコマンドは以下のとおり。

- dpkgコマンド: パッケージのインストール・アンインストールなど基本的なパッケージ管理を行うコマンド

  => RPM系Linuxの`rpm`とほぼ同等

- dpkg-reconfigureコマンド: インストール済みのパッケージを再インストールするコマンド

## dpkgコマンド

```
dpkg [オプション] アクション
```

| オプション | 説明                                                             |
|------------|------------------------------------------------------------------|
| -E         | 同バージョンが既にインストールされていればインストールを行わない |
| -G         | 新バージョンが既にインストールされていればインストールを行わない |
| -R         | ディレクトリを再帰的に処理                                       |

| アクション                         | 説明                                                           |
|------------------------------------|----------------------------------------------------------------|
| -i(--install) パッケージファイル名 | パッケージのインストール                                       |
| -r(--remove) パッケージ名          | 設定ファイルを残してパッケージをアンインストール               |
| -P(--purge) パッケージ名           | 設定ファイルも含め完全にパッケージをアンインストール           |
| -l(--list) [検索パターン]          | インストール済みパッケージを検索して表示                       |
| -L(--listfiles) パッケージ名       | 指定したパッケージからインストールされたファイルを一覧表示     |
| -s(--status) パッケージ名          | インストール済みパッケージの詳細情報の表示                     |
| -S(--search) 検索パターン          | 指定したファイルがどのパッケージからインストールされたかを表示 |
| -C(--audit)                        | インストールが完了していない(不完全)パッケージの表示           |

# APT(Advanced Package Tool)ツール

APTツールはdpkgツールを拡張した群。

インターネット上ないしはメディア上のパッケージ情報のデータベースを使い、依存関係を調整しながらパッケージ管理を行うことができる。

パッケージの取得元(リポジトリ)は`/etc/apt/sources.list`ファイルで設定を行う。

- apt-get: パッケージのインストール・アンインストールなどを行うコマンド

  => RPM系Linuxの`yum`がほぼ同等

- apt-cache: パッケージ情報の検索・参照などを行うコマンド
- apt: apt-getとapt-cacheの機能を統合したコマンド

## apt-get

| サブコマンド                      | 説明                                                                                                 |
|-----------------------------------|------------------------------------------------------------------------------------------------------|
| install パッケージ名              | 指定パッケージのインストール、またはアップグレード                                                   |
| remove パッケージ名               | 指定パッケージのアンインストール                                                                     |
| upgrade                           | 全パッケージのうち、既存パッケージの削除や新規パッケージの追加をせずに更新できるものをアップグレード |
| dist-upgrade                      | システム全体(全パッケージとカーネル)のアップグレード                                                 |
| update                            | パッケージのデータベースを最新版に更新                                                               |
| clean                             | 過去に取得したパッケージファイルを削除                                                               |
| -f install(--fix-broken install)  | 既存システムに存在する依存関係の問題や不完全なパッケージを修復                                       |

updateはパッケージの取得元(リポジトリ)のバージョン情報を管理するデータベースを更新する。

=> このデータベースは`/etc/apt/sources.list`ファイルに定義されている

updateは定期的に実行することが推奨されており、特にupgradeやdist-upgradeを行う前は実行するべき。

## apt-cache

| サブコマンド         | 説明                                                 |
|----------------------|------------------------------------------------------|
| search キーワード    | キーワードを含むパッケージを検索                     |
| show パッケージ名    | 指定したパッケージの情報を表示                       |
| showpkg パッケージ名 | 指定したパッケージの依存関係を含めた情報の表示       |
| depends パッケージ名 | 指定したパッケージが依存しているパッケージの一覧表示 |


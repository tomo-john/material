# HISTFILESIZE

環境変数`HISTFILESIZE`はコマンド履歴保存ファイルへの履歴保存数。

`HISTSIZE`は現在のシェルでのコマンド履歴の保存数。

`HISTFILE`はコマンド履歴保存ファイルへのパス。

# parted

partedコマンドはMBR形式、GPT形式をサポートするパーティション操作コマンド。

対話式のツールで、起動するとpartedのプロンプトが表示される。

パーティションテーブルの方式をGPT形式とする場合は、`mklabel`サブコマンドで`gtp`を指定する。

```
parted /dev/sdb
(parted) mklabel gpt
(parted q
```

=> q(quit)でpartedでの作業を終了する

partedコマンドでは`-s`オプションに続けて対話形式のサブコマンドを直接指定することで、対話式でなく、直接パーティション編集を行うことも可能。

```
parted /dev/sdb -s mklabel gpt
```

# exFAT

exFAT(Extended FAT: イーエックスファット)はUSBメモリのようなフラッシュドライブ向けのファイルシステム。

従来のFATファイルシステムとの互換性はなく、FAT32ファイルシステムで扱える最大サイズが4GiBであるのに対し、exFATでは4GiB以上の大容量ファイルが扱える。

# ブートローダ

GRUB/GRUB2などのブートローダはHDDの最初のセクタ(512バイト)にあるMBR(マスターブートレコード)に格納されている。

MBRは使用する領域が決まっており、ブートローダは先頭の446バイト領域に格納されている。

- 先頭から:
  - 446バイト: ブートストラップローダ
  - 16バイト: 第1パーティション情報
  - 16バイト: 第2パーティション情報
  - 16バイト: 第3パーティション情報
  - 16バイト: 第4パーティション情報
  - 2バイト: ブートシグネチャ

MBRにインストールされるGRUBプログラムのサイズは440バイト。

```
# 既存のパーティションテーブルは残し、バックアップからMBRのみ復元(どちらでもok)
dd if=mbr_backup.img of=/dev/sda bs=440 count=1
dd if=mbr_backup.img of=/dev/sda bs=446 count=1
```

# whereis

指定したコマンド、またそのマニュアル、ソースコードが格納されている場所を検索し、絶対パスで表示する。

`which`コマンドでは環境変数PATHで設定しているディレクトリから、指定したコマンドが格納されている場所のみを検索し、絶対パスで表示する。

=> マニュアルやソースコードは表示しない

# 正規表現

- `[1-5]`: 1から5の中からどれか1文字
- `[^1-5]`: 1から5以外のどれか1文字
- `^15$`: 行頭が1、行末が5 => 15にマッチ
- `1[2-5]`: 1の後に2から5のどれか1文字がマッチ
- `^1.*5$`: 行頭が1、任意の文字を0回以上繰り返し、行末が5にマッチ
- `1...5`: 1と5の間に任意の3文字があるものにマッチ

# vim

`:x`は`:wq`と`ZZ`と同じ意味(保存して終了)


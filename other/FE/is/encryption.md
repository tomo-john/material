# 暗号化

情報セキュリティにおける脅威に対する対応策の1つ。

暗号化はデータを第三者に読まれないように変換する技術。通信の盗聴や改ざんなどへの対策になる。

## 暗号方式の分類

| 分類           | 鍵の使い方                   | 特徴                           | 代表例                          |
|----------------|------------------------------|--------------------------------|---------------------------------|
| 共通鍵暗号方式 | 暗号化と復号に同じ鍵を使う   | 処理は高速だが、鍵の共有が課題 | AES, DESなど                    |
| 公開鍵暗号方式 | 暗号化と復号に異なる鍵を使う | 鍵の配布が安全で便利だが遅め   | RSA, DSA, 楕円曲線暗号(ECC)など |

公開鍵暗号方式において、公開鍵で暗号化した文章はその公開鍵とペアになっている秘密鍵でしか復号できない。

- じょんがペアとなる2つの鍵(公開鍵と秘密鍵)を作る
- 作成した公開鍵はばらまき、秘密鍵は大切に保管する
- 公開鍵は誰でも入手できるので、誰でも暗号化することができる
- 暗号化されたデータを復号できるのは秘密鍵を持っているじょんだけ

## ハイブリッド暗号方式

共通鍵暗号方式と公開鍵暗号方式を組み合わせた暗号方式。

実際の通信(SSL/TLS)ではこの暗号方式が使用されている。

- 1 : 共通鍵で暗号化
- 2 : 相手の公開鍵を使って、共通鍵を暗号化
- 3 : 暗号化したファイルと、暗号化された共通鍵を相手に送る
- 4 : 送られた相手は自分の秘密鍵で、暗号化された共通鍵を復号
- 5 : 復号した共通鍵で暗号化されたファイルを復号

## 暗号化アルゴリズム

- AES : 共通鍵暗号方式
- RSA : 公開鍵暗号方式

共通鍵暗号方式では、以前はDESが使用されていたが、安全性に問題があったので今はAESが主流。

公開鍵暗号方式では、RSAが現在主流の暗号化アルゴリズムの1つ。

RSA(Rivest Shamir Adleman)はこの暗号化を発明した3人の名前の頭文字。

RSAは巨大な数の素因数分解が難しいことを利用した暗号化アルゴリズム。

## ハッシュ関数

ハッシュ関数とは、文字列を入力すると、一定の長さの値を出力する関数。

- 同じ文字列では、必ず同じ値が出力される
- 少しでも文字列が異なると出力される値は大きく変わる
- ハッシュ関数によって出力される値のことをダイジェストという
- ダイジェストから元の値に戻すことはｄけいない

## SHA256

ハッシュ関数のアルゴリズムにもいろいろあるがSHA(Secure Hash Algorithm)がよく使われる。

SHA-1, SHA-2などのバージョンがあるが、現在はSHA-2が一般的。

SHA-2のうち、256ビットの長さのダイジェストを出力するハッシュ関数のアルゴリズムをSHA-256という。


## デジタル署名

公開鍵暗号方式を使って、データに電子的に署名を行うこと。

企業がインターネットを使って文書を送る際に使われる。

デジタル署名の大原則として、秘密鍵で暗号化した文章はペアとなる公開鍵でしか復号できない。

=> 公開鍵暗号方式と比べ、秘密鍵と公開鍵の位置が入れ替わっている :dog:

- 公開鍵暗号方式 : 誰でも暗号化でき(公開鍵)、復号は1人だけ(秘密鍵)
- デジタル署名 : 暗号化は1人だけ(秘密鍵)、誰でも復号できる(公開鍵)

デジタル署名を使うことで、なりすましやデータの改ざんを検知することができる。

## 認証局とデジタル証明書

認証局は、データに付与されているデジタル署名が署名者本人のものであるかを証明する第三者機関。

インターネットの世界での印鑑登録証明書に相当するのがデジタル証明書で、これを発行するのが認証局。

デジタル証明書は、公開鍵の所有者が本人であることを証明するデータ。

認証局は`CA(Certification Authority)`と表記する場合もある。

また認証局を使ってなりすましを防ぐ仕組みのことを`PKI`という。

PKI(Public Key Infrastructure : 公開鍵基盤)は、公開鍵暗号方式やデジタル署名で使用する公開鍵の持ち主を保証するためのインフラ。

=> PKIとは公開鍵の正当性を認証局に保証してもらう仕組み


# /etc/passwd

Linuxではユーザーアカウント情報は`/etc/passwd`ファイルに保存される。

=> 1行につき1ユーザーアカウントの情報が記述されている

=> 項目は`:`で区切られている

```
# /etc/passwd抜粋
tomo:x:1000:1000:,,,:/home/tomo:/bin/bash
```

- 1 `tomo` : ユーザー名
- 2 `x` : パスワード(現在はxで固定)
- 3 `1000` : UID
- 4 `1000` : GID(プライマリグループ)
- 5 `,,,` : コメント
- 6 `/home/tomo` : ホームディレクトリ
- 7 `/bin/bash` : デフォルトシェル

`/etc/passwd`ファイルは一般ユーザーでも読み取り可能(644だった)。

2項目目にはかつては暗号化されたパスワードが格納されていたが、セキュリティの観点から現在は使用されていない(xで固定)。

=> 現在は`シャドウパスワード`を使い、パスワード情報は`/etc/shadow`に格納されている

=> `/etc/shadow`はスーパーユーザー(root)しか読み出しができない

---

# /etc/group

グループの設定は`/etc/group`に保存されている。

```
# /etc/group抜粋
tomo:x:1000:
```

- 1 `tomo` : グループ名
- 2 `x` : パスワード(現在はxで固定)
- 3 `1000` : GID
- 4 : 例では空白だけどここはグループメンバー

2項目目には`/etc/passwd`と同様に`x`固定 => 現在はシャドウパスワードが使用されている。

グループメンバーには、このグループをサブグループにしているユーザーのユーザー名が入る。

=> 複数のユーザーが属している場合は`,`で区切って並べる

デフォルトのグループの割り当てはディストリビューションによって異なる。

- 一般ユーザーはすべて特定のグループに所属させる
- 新規ユーザー作成ごとにそのユーザー専用のグループも作成して割り当てる

ユーザーは複数のグループに属することができる。

基本となるグループをプライマリグループ(基本グループ)、それ以外に参加しているグループをサブグループ(参加グループ)という。

ファイルやディレクトリを作成したときに所有グループとしてデフォルトで適用されるのがプライマリグループ。

=> `newgrp`コマンドで一時的に変更も可能

ユーザーのプライマリグループは`/etc/passwk`ファイルの4項目目(GID)で確認が可能。

---

# /etc/shadow

現在のシステムでは`シャドウパスワード`が採用されているので、暗号化されたパスワードが`/etc/shadow`に記録されている。

=> `/etc/passwd`はrootユーザーしか読み取りができない

昔は`/etc/passwd`にパスワードハッシュが入っており、一般ユーザーでも読み取りが可能の為、ハッシュ総当たり攻撃のリスクがあった。

なのでパスワードだけはrootにしか読めない場所に移動したのが`/etc/shadow`。


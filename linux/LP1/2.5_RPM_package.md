# RPMパッケージの管理

RPMはRed Hat Enterprise Linux, Fedora, CentOS, openSUSE, SUSE Linux Enterprise

などの多くのディストリビューションで採用されているパッケージ管理システム

# 1 RPMパッケージ

```
bash-4.2.46-30.el7.x86_64.rpm

bash   : パッケージの名称
4.2.46 : バージョン番号
30.el7 : リリース番号
x86_64 : アーキテクチャ
rpm    : 拡張子
```

## 2 rpmコマンド

RPMパッケージを操作するコマンド

- RPM系    : rpm  => yum(高いレベル, 現在はdnfが主流)
- Debian系 : dpkg => apt(高いレベル, apt-getの後継)

### インストール

- -i: インストール
- -U: アップグレード(なければインストール)
- -F: インストールされていればアップグレード
- -v: 詳細情報を表示
- -h: 進行状況を`#`で表示
- --nodeps: 依存関係を無視してインストール
- --force : 既存ファイルを新しいものへ置き換え
- --test  : 実際にインストールはせずテストを実施

### アンインストール
- -e: アンインストール
- --nodeps: 依存関係を無視してアンインストール

### 照会モード
- -q: 指定したパッケージがインストールされているか照会
- -a: インストール済みのすべてのパッケージを表示
- -f: 指定したファイルを含むパッケージを表示
- -p: 対象としてパッケージファイルを指定
- -c: 設定ファイルのみ表示
- -d: ドキュメントのみ表示
- -i: 指定したパッケージ情報を表示
- -l: 指定したパッケージに含まれるファイルを表示
- -R: 指定したパッケージが依存しているファイルなどを表示
- --changelog: 変更履歴を表示

## 3 YUM

Yellow dog Updater, Modified

APTツールに相当するパッケージ管理ツール

`/etc/yum.conf`, `/etc/yum.repos.d`ディレクトリ以下のファイルで設定を行う

### yumコマンド

YUMを使った管理は`yum`コマンドで行う

|サブコマンド   |説明                                           |
|---------------|-----------------------------------------------|
|check-update   |アップデート対象のパッケージリストを表示       |
|update         |指定したパッケージをアップデート               |
|install        |指定したパッケージをインストール               |
|remove         |指定したパッケージをアンインストール           |
|info           |指定したパッケージの情報を表示                 |
|list           |全パッケージ情報をリスト表示                   |
|repolist       |リポジトリ一覧を表示                           |
|search         |パッケージ情報をキーワードで検索               |
|search all     |パッケージをキーワードで検索(説明文などすべて) |
|groups list    |パッケージグループをリスト表示                 |
|groups install |指定したグループのパッケージをインストール     |

## 4 dnfコマンド

これまでにyumを採用していたディストリビューションではyumの後継として`dnf`コマンドが使用されてきている

=> 基本的に使い方はyumと同じ

```
# インストール
dnf install package-name

# アップデート
dnf upgrade package-name  # updateでも同じ

# キャッシュのクリア
dnf clearn all
```

## 5 Zypperを使用したパッケージ管理

openSUSEでもRPMパッケージが使われるが、パッケージ管理には`zypper`コマンドを使う

多くのサブコマンドには短い名前が用意されている(install => `in` と省略できる)

パッケージ名はワイルドカードを使って指定も可能

```
# gitパッケージのインストール
zypper in git

# yastで始まる名前のパッケージを全てインストール
zypper in yast*

# ディストリビューションをアップグレード(dist-upgrade
zypper dup
```


# IPアドレス

TCP/IPでは、ネットワークに接続された機器を識別するのにIPアドレスを使用する。

IPv4では32ビットで構成され、通常は8ビットごとに`.`で区切って10進数で表示する。

| 進数   | 第1      | 第2      | 第3      | 第4      |
|--------|----------|----------|----------|----------|
| 2進数  | 11000000 | 10101000 | 00000001 | 00000010 |
| 10進数 | 192      | 168      | 1        | 2        |

IPアドレスはネットワークセグメントを識別するネットワーク部と、ネットワークセグメント内の機器を識別するためのホスト部に分割できる。

ネットワーク部とホスト部の境界は、サブネットマスクより求めることができる。

サブネットマスクも32ビットで構成され、8ビットことに区切って表記する。(255.255.255.0)

IPアドレスとサブネットマスクの論理積により、ネットワーク自身を表すネットワークアドレスを算出できる。

| 項目                     | 2進数                               | 10進数        |
|--------------------------|-------------------------------------|---------------|
| IPアドレス               | 11000000.10101000.00000001.00000010 | 192.168.1.2   |
| サブネットマスク         | 11111111.11111111.11111111.00000000 | 255.255.255.0 |
| ネットワークアドレス     | 11000000.10101000.00000001.00000000 | 192.168.1.0   |
| ブロードキャストアドレス | 11000000.10101000.00000001.11111111 | 192.168.1.255 |

ホスト部のビットをすべて1にしたアドレスはブロードキャストアドレスと呼ばれ、同じネットワークに属するすべてのホストに送信するための特別なアドレス。

ネットワークアドレスとブロードキャストアドレスにはネットワークデバイスと割り当てることができない。

ネットワークアドレスが異なるネットワークへはルーターを介さなければ通信することはできない。

TCP/IPではIPアドレスを持っている機器全般を`ホスト`と呼ぶ。

IPアドレスはホストの持つネットワークインターフェース(NICなど)に論理的に割り当てられる。

=> 1つのホストで複数のIPアドレスを持つこともある

## クラス

| クラス | IPアドレスの範囲             | サブネットマスク | ネットワーク部ビット数 | プライベートアドレス範囲       |
|--------|------------------------------|------------------|------------------------|--------------------------------|
| A      | 0.0.0.0 ～ 127.255.255.255   | 255.0.0.0        | 8                      | 10.0.0.0 ～ 10.255.255.255     |
| B      | 128.0.0.0 ～ 191.255.255.255 | 255.255.0.0      | 16                     | 172.16.0.0 ～ 172.31.255.255   |
| C      | 192.0.0.0 ～ 223.255.255.255 | 255.255.255.0    | 24                     | 192.168.0.0 ～ 192.168.255.255 |

- デフォルトルート : IPアドレスの先頭8ビットが0
- ローカルループバック : IPアドレスの先頭8ビットが127

## CIDR(Classless Inter-Domain Routing)

クラスCでは1ネットワークあたりのホスト数が254。

=> 0～255で256からネットワークアドレスとブロードキャストアドレスを引いて254

クラスによる区分を用いると、最小でも組織ごとに256個のIPアドレスが消費される。

CIDRではネットワークアドレス部は`1ビット`単位で扱うことができる。

サブネットマスクを`255.255.255.192(26ビット)`とするとホスト部が2ビット減る代わりに、ネットワーク部が2ビット増え、多くのIPアドレスを割り当てることができる。

```
クラスC（192.168.1.0/24）を4つに分割（/26）

1. 192.168.1.0/26     → IP範囲：192.168.1.1 ～ 192.168.1.62
2. 192.168.1.64/26    → IP範囲：192.168.1.65 ～ 192.168.1.126
3. 192.168.1.128/26   → IP範囲：192.168.1.129 ～ 192.168.1.190
4. 192.168.1.192/26   → IP範囲：192.168.1.193 ～ 192.168.1.254
```


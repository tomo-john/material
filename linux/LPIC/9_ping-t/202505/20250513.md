# ntpq

NTPデーモン(`ntpd`)と対話的に通信して、状態や統計情報を取得するツール。

主に時刻同期が正しく行われているかを確認するために使う。

| オプション | 説明                                                                          |
|------------|-------------------------------------------------------------------------------|
| -p         | serverに指定したサーバーとの同期状態を一覧表示する(対話モードの`peers`と同じ) |
| -i         | 対話モードで起動(デフォルト)                                                  |

# at

1度だけ実行するジョブを予約するコマンド。

`at 23:00`のように指定すると対話モードで起動 => 実行するコマンドを入力 => `Ctrl+D`で終了

- `at -l` : 予約中のジョブを表示 => `atq`と同じ
- `at -d ジョブ番号` : 指定した予約中のジョブを削除 => `atrm`と同じ => ジョブ番号は`at -l(atq)`で確認する

---

# systemd-journald

systemdでは`systemd-journald`デーモンを動作させログの一元管理を行う。

systemd-journaldはsystemdから起動したプロセスの標準出力やsyslogへのログメッセージをバイナリ形式で記録する。

syslogの規格にも対応しており、同じファシリティやプライオリティが指定できる。

systemd-journaldのデフォルトの設定では、バイナリ形式のログは`/run/log/journal`配下にシステム固有のディレクトリを作成し、その中の`system.journal`というファイルに記録する。

=> `/run`ディレクトリはメモリ上に作成されたファイルシステム上のディレクトリのため、再起動するとデータは消える

ログが再起動でクリアされないようにするためには、`/etc/systemd/journald.conf`ファイルでジャーナルファイルの保存先を設定する。

=> `Storage=persistent`を設定 => `/var/log/journal`ディレクトリを作成し、その配下にログを吐く

# journalctl

`-n`, `--lines`オプションで指定した行数のみ直近から表示(デフォルトは10行)

# getent
`/etc/nsswitch.conf`は、名前解決やサービス名解決の際に問合せ順序を指定するファイル。

=> ユーザー情報、パスワード情報の取得、ホスト名からIP情報の取得する際の情報検索先など設定内容は多岐にわたる。

`getent`はそれらの情報問合せを行うコマンド。

```
getent データベース名 [キー...]
```

キーを指定しなかった場合、指定したデータベースのすべての内容が表示される。

# set

- noclobber : リダイレクト演算子で既存ファイルへの上書き禁止
- noglob : パス名展開を無効(ワイルドカードによる展開)

